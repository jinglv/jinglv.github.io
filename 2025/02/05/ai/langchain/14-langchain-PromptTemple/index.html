<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jinglv.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":5,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="å­¦ä¹ LangChainå­¦ä¹ ç¬”è®°ç¬¬ä¸‰è®²">
<meta property="og:type" content="article">
<meta property="og:title" content="LangChainç»„ä»¶PromptTemple -- Langchain v0.3">
<meta property="og:url" content="https://jinglv.github.io/2025/02/05/ai/langchain/14-langchain-PromptTemple/index.html">
<meta property="og:site_name" content="Jean&#39;s Blog">
<meta property="og:description" content="å­¦ä¹ LangChainå­¦ä¹ ç¬”è®°ç¬¬ä¸‰è®²">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250829153036422.png">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250829163851831.png">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250902111419077.png">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250902135805609.png">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250915105216387.png">
<meta property="article:published_time" content="2025-02-04T16:00:00.000Z">
<meta property="article:modified_time" content="2025-08-29T07:30:00.000Z">
<meta property="article:author" content="Jean Lv">
<meta property="article:tag" content="LangChain">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250829153036422.png">

<link rel="canonical" href="https://jinglv.github.io/2025/02/05/ai/langchain/14-langchain-PromptTemple/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>LangChainç»„ä»¶PromptTemple -- Langchain v0.3 | Jean's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Jean's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jean's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸€ä¸ªä¸“æ³¨è½¯ä»¶æµ‹è¯•å¼€å‘æŠ€æœ¯çš„ä¸ªäººåšå®¢</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jinglv.github.io/2025/02/05/ai/langchain/14-langchain-PromptTemple/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Jean Lv">
      <meta itemprop="description" content="æ¶‰çŒçš„ä¸»è¦ç¼–ç¨‹è¯­è¨€Javaã€Python, é¢†åŸŸè½¯ä»¶æµ‹è¯•ã€AIæµ‹è¯•å¼€å‘ç›¸å…³">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jean's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          LangChainç»„ä»¶PromptTemple -- Langchain v0.3
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-02-05 00:00:00" itemprop="dateCreated datePublished" datetime="2025-02-05T00:00:00+08:00">2025-02-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-08-29 15:30:00" itemprop="dateModified" datetime="2025-08-29T15:30:00+08:00">2025-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LangChain/" itemprop="url" rel="index"><span itemprop="name">LangChain</span></a>
                </span>
            </span>

          
            <div class="post-description">å­¦ä¹ LangChainå­¦ä¹ ç¬”è®°ç¬¬ä¸‰è®²</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="æç¤ºè¯ï¼šå¤§æ¨¡å‹å·¥ä½œçš„æ ¸å¿ƒéƒ¨ä»¶"><a href="#æç¤ºè¯ï¼šå¤§æ¨¡å‹å·¥ä½œçš„æ ¸å¿ƒéƒ¨ä»¶" class="headerlink" title="æç¤ºè¯ï¼šå¤§æ¨¡å‹å·¥ä½œçš„æ ¸å¿ƒéƒ¨ä»¶"></a>æç¤ºè¯ï¼šå¤§æ¨¡å‹å·¥ä½œçš„æ ¸å¿ƒéƒ¨ä»¶</h1><p>å¤§æ¨¡å‹ä¸­æç¤ºè¯çš„å·¥ä½œåŸç†åŠç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬æç¤ºè¯æ¨¡æ¿ã€å¤§æ¨¡å‹å¤„ç†å’Œè¾“å‡ºè§£æå™¨ä¸‰éƒ¨åˆ†ï¼Œé€šè¿‡æ¨¡æ¿å°†å˜é‡å¡«å…¥å›ºå®šç»“æ„ç”Ÿæˆæç¤ºè¯ï¼Œè¾“å…¥å¤§æ¨¡å‹åå¾—åˆ°è‡ªç„¶è¯­è¨€å›ç­”ï¼Œå¹¶ç”±è¾“å‡ºè§£æå™¨è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œä¾¿äºåç»­åº”ç”¨å¤„ç†ã€‚</p>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250829153036422.png" alt="image-20250829153036422" style="zoom:50%;" /></p>
<ul>
<li>å¤§æ¨¡å‹æ•´ä½“å·¥ä½œæµç¨‹çš„ä¸‰å¤§ç»„ä»¶ï¼šæç¤ºè¯æ¨¡æ¿ã€è¯­è¨€æ¨¡å‹ã€è¾“å‡ºè§£æå™¨</li>
<li>æç¤ºè¯æ¨¡æ¿çš„ä½œç”¨æ˜¯å°†å¯å˜éƒ¨åˆ†æŠ½è±¡ä¸ºå˜é‡ï¼Œå›ºå®šä¸æ˜“å˜åŒ–çš„éƒ¨åˆ†ï¼Œå®ç°å¤ç”¨å’Œç®¡ç†</li>
<li>è¯­è¨€æ¨¡å‹ç»„ä»¶æ¥æ”¶æç¤ºè¯æ¨¡æ¿ç”Ÿæˆçš„å®Œæ•´æç¤ºè¯ï¼Œå¹¶è¿”å›è‡ªç„¶è¯­è¨€å“åº”</li>
<li>è¾“å‡ºè§£æå™¨å°†è‡ªç„¶è¯­è¨€å“åº”è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚JSONï¼‰ï¼Œä¾¿äºåç»­ç¨‹åºå¤„ç†</li>
</ul>
<h1 id="promptsæ¨¡æ¿ï¼šå¤§æ¨¡å‹æ¨ç†çš„å…³é”®"><a href="#promptsæ¨¡æ¿ï¼šå¤§æ¨¡å‹æ¨ç†çš„å…³é”®" class="headerlink" title="promptsæ¨¡æ¿ï¼šå¤§æ¨¡å‹æ¨ç†çš„å…³é”®"></a>promptsæ¨¡æ¿ï¼šå¤§æ¨¡å‹æ¨ç†çš„å…³é”®</h1><p>æç¤ºè¯æ’°å†™çš„é‡è¦æ€§åŠæŠ€å·§ï¼ŒæŒ‡å‡ºä¸ä¼šæé—®ä¼šå¯¼è‡´å¤§æ¨¡å‹å›ç­”è´¨é‡ä½ä¸‹ï¼Œå¼ºè°ƒå¥½çš„æç¤ºè¯åº”åŒ…å«è§’è‰²è®¾å®šã€èƒŒæ™¯ä¿¡æ¯ã€ç›®æ ‡å’Œçº¦æŸæ¡ä»¶ç­‰è¦ç´ ï¼Œå¹¶æåˆ°æç¤ºè¯æ¨¡æ¿åœ¨åº”ç”¨å¼€å‘ä¸­çš„å…³é”®ä½œç”¨ã€‚</p>
<ul>
<li>ä¸ä¼šå†™æç¤ºè¯çš„äºº â€”  ä»…æä¾›ä¸€å¥è¯æé—®ï¼Œç¼ºä¹ä¸Šä¸‹æ–‡å’Œçº¦æŸæ¡ä»¶<ul>
<li>ä¾‹å­ï¼šæˆ‘æƒ³å»æµ·å—ç©ï¼Œè¯·ä½ å¸®æˆ‘åšä¸€ä»½æ—…è¡Œæ”»ç•¥</li>
</ul>
</li>
<li>ä¼šå†™æç¤ºè¯çš„äºº â€” å¥½çš„æç¤ºè¯åº”åŒ…æ‹¬è§’è‰²è®¾å®šã€èƒŒæ™¯ä¿¡æ¯ã€ç›®æ ‡éœ€æ±‚å’Œå›ç­”è¦æ±‚<ul>
<li>ä¾‹å­ï¼šå‡å¦‚ä½ æ˜¯å¯¼æ¸¸ï¼Œæˆ‘è¦åˆ°æµ·å—ç©ï¼Œé¢„ç®—ä¸€ä¸‡å…ƒï¼Œè·Ÿè¡Œäººæ•°ä¸‰ä¸ªäººï¼Œè¡Œç¨‹7å¤©ï¼Œè¯·å¸®æˆ‘åšä¸€ä»½æ—…è¡Œæ”»ç•¥ã€‚è¯·æ³¨æ„ï¼šæˆ‘ä¸å–œæ¬¢è¡Œç¨‹å¤ªç´§å‡‘ï¼Œæˆ‘ä¸å–œæ¬¢ç½‘çº¢æ™¯ç‚¹ï¼Œæ›´å–œæ¬¢æœ‰æ–‡åŒ–åº•è•´çš„æ™¯ç‚¹ï¼Œå¦å¤–ï¼Œæ¨èæ™¯ç‚¹è¯·é™„ä¸Šå„ä¸ªæ™¯ç‚¹çš„ä»·æ ¼ã€‚</li>
</ul>
</li>
</ul>
<p>ä¼˜ç§€çš„æç¤ºè¯(éæ¨ç†å‹)ï¼š</p>
<p>ã€ç«‹è§’è‰²ã€‘ï¼šå¼•å¯¼AIè¿›å…¥å…·ä½“åœºæ™¯ï¼Œèµ‹äºˆå…¶è¡Œå®¶èº«ä»½</p>
<p>ã€è¿°é—®é¢˜ã€‘ï¼šå‘Šè¯‰AIä½ çš„å›°æƒ‘å’Œé—®é¢˜ï¼Œä»¥åŠèƒŒæ™¯ä¿¡æ¯</p>
<p>ã€å®šç›®æ ‡ã€‘ï¼šå‘Šè¯‰AIä½ çš„éœ€æ±‚ï¼Œå¸Œæœ›è¾¾æˆçš„ç›®æ ‡</p>
<p>ã€è¡¥è¦æ±‚ã€‘ï¼šå‘Šè¯‰AIå›ç­”æ—¶æ³¨æ„ä»€ä¹ˆï¼Œæˆ–è€…å¦‚ä½•å›å¤</p>
<p>æç¤ºè¯æ¨¡æ¿çš„å¥½å¤„ï¼š</p>
<ol>
<li>å°†æç¤ºè¯æç‚¼æˆæ¨¡æ¿</li>
<li>å®ç°æç¤ºè¯å¤ç”¨ã€ç‰ˆæœ¬ç®¡ç†ã€åŠ¨æ€å˜åŒ–ç­‰</li>
</ol>
<h1 id="PromptTemplateï¼ˆå­—ç¬¦ä¸²æç¤ºæ¨¡æ¿ï¼‰"><a href="#PromptTemplateï¼ˆå­—ç¬¦ä¸²æç¤ºæ¨¡æ¿ï¼‰" class="headerlink" title="PromptTemplateï¼ˆå­—ç¬¦ä¸²æç¤ºæ¨¡æ¿ï¼‰"></a>PromptTemplateï¼ˆå­—ç¬¦ä¸²æç¤ºæ¨¡æ¿ï¼‰</h1><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç”¨äº<strong>æ–‡æœ¬è¡¥å…¨æ¨¡å‹</strong>ï¼Œè¾“å…¥æ˜¯çº¯æ–‡æœ¬ï¼ˆå•å­—ç¬¦ä¸²ï¼‰ã€‚</li>
<li>é€‚ç”¨äºç®€å•çš„ä»»åŠ¡ï¼Œä¾‹å¦‚ç”Ÿæˆä¸€æ®µæ–‡æœ¬ã€å›ç­”é—®é¢˜æˆ–æ‰§è¡ŒæŒ‡ä»¤ã€‚</li>
</ul>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>è¾“å…¥å˜é‡æ’å€¼</strong>ï¼šé€šè¿‡ <code>&#123;&#125;</code> å ä½ç¬¦åŠ¨æ€æ›¿æ¢å˜é‡ã€‚</li>
<li><strong>æ¨¡æ¿æ ¼å¼</strong>ï¼šæ”¯æŒ <code>f-string</code>ã€‚</li>
<li><p><strong>è¾“å‡ºå½¢å¼</strong>ï¼šç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ä½œä¸ºæ¨¡å‹è¾“å…¥ã€‚</p>
</li>
<li><p>å­—ç¬¦ä¸²æ¨¡ç‰ˆ - PromptTemplateï¼ˆLLMsï¼Œåå‘äºæ–‡æœ¬å¤„ç†ï¼Œä¸å¤ªèƒ½å¤„ç†è¾“å‡ºç»“æ„åŒ–æ•°æ®ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæç¤ºè¯æ¨¡ç‰ˆ</span></span><br><span class="line"><span class="comment"># æ–¹å¼ä¸€</span></span><br><span class="line">prompt_ = PromptTemplate(</span><br><span class="line">	input_variables=[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;county&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>],</span><br><span class="line">  template=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  # è§’è‰²å®šä½</span></span><br><span class="line"><span class="string">  ä½ æ˜¯ä¸€ä¸ª&#123;name&#125;,å¸®æˆ‘èµ·ä¸€ä¸ªå…·æœ‰&#123;county&#125;ç‰¹è‰²çš„&#123;sex&#125;åå­—</span></span><br><span class="line"><span class="string">  &quot;&quot;&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># æ–¹å¼äºŒ</span></span><br><span class="line">prompt = PromptTemplate.from_template(</span><br><span class="line">    <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ª&#123;name&#125;,å¸®æˆ‘èµ·ä¸€ä¸ªå…·æœ‰&#123;county&#125;ç‰¹è‰²çš„&#123;sex&#125;åå­—&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># æ¨¡ç‰ˆ + å˜é‡ = æç¤ºè¯</span></span><br><span class="line">prompts = prompt.<span class="built_in">format</span>(name=<span class="string">&quot;ç®—å‘½å¤§å¸ˆ&quot;</span>,county=<span class="string">&quot;æ—¥æœ¬&quot;</span>, sex=<span class="string">&quot;ç”·å­©å­&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(prompts)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="ChatPromptTempleï¼ˆèŠå¤©æç¤ºæ¨¡æ¿ï¼‰"><a href="#ChatPromptTempleï¼ˆèŠå¤©æç¤ºæ¨¡æ¿ï¼‰" class="headerlink" title="ChatPromptTempleï¼ˆèŠå¤©æç¤ºæ¨¡æ¿ï¼‰"></a>ChatPromptTempleï¼ˆèŠå¤©æç¤ºæ¨¡æ¿ï¼‰</h1><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç”¨äº<strong>èŠå¤©æ¨¡å‹</strong>ï¼ˆå¦‚ ChatGPT / é€šä¹‰åƒé—®ç­‰ï¼‰ï¼Œè¾“å…¥æ˜¯å¤šè½®å¯¹è¯çš„æ¶ˆæ¯åˆ—è¡¨ï¼ˆ<code>SystemMessage</code>ã€<code>HumanMessage</code>ã€<code>AIMessage</code> ç­‰ï¼‰ã€‚</li>
<li>é€‚ç”¨äºéœ€è¦æ¨¡æ‹Ÿå¤šè½®å¯¹è¯æˆ–è§’è‰²æ‰®æ¼”çš„åœºæ™¯ã€‚</li>
</ul>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>å¤šæ¶ˆæ¯ç±»å‹æ”¯æŒ</strong>ï¼šå¯ä»¥ç»„åˆç³»ç»ŸæŒ‡ä»¤ã€ç”¨æˆ·è¾“å…¥å’ŒåŠ©æ‰‹å›å¤ã€‚</li>
<li><strong>æ¶ˆæ¯æ ¼å¼åŒ–</strong>ï¼šç”Ÿæˆç»“æ„åŒ–çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œä¾›èŠå¤©æ¨¡å‹å¤„ç†ã€‚</li>
<li><p><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒåŠ¨æ€æ›¿æ¢å˜é‡ï¼ˆå¦‚ <code>SystemMessage</code> ä¸­çš„å ä½ç¬¦ï¼‰ã€‚</p>
</li>
<li><p>å¯¹è¯æ¨¡ç‰ˆ - ChatPromptTempleï¼ˆChatLLMsï¼Œä¸»æµï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"></span><br><span class="line">chat_template = ChatPromptTemplate.from_messages(</span><br><span class="line">    [</span><br><span class="line">        (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªèµ·åå¤§å¸ˆï¼Œä½ çš„åå­—å«&#123;name&#125;&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;ä½ å¥½&#123;name&#125;ï¼Œä½ æ„Ÿè§‰å¦‚ä½•ï¼Ÿ&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;ai&quot;</span>, <span class="string">&quot;æˆ‘æ„Ÿè§‰è¿˜ä¸é”™ï¼Œè°¢è°¢&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;ai&quot;</span>, <span class="string">&quot;ä½ å¥½ï¼Œæˆ‘å«&#123;name&#125;&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;&#123;user_input&#125;&quot;</span>),</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">chats = chat_template.format_messages(name=<span class="string">&quot;ç®—å‘½å¤§å¸ˆ&quot;</span>,user_input=<span class="string">&quot;ä½ å¥½æˆ‘æ˜¯è°å‘¢ï¼Ÿ&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(chats)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>æ¶ˆæ¯å ä½ç¬¦</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate, MessagesPlaceholder</span><br><span class="line"><span class="keyword">from</span> langchain_core.messages <span class="keyword">import</span> HumanMessage</span><br><span class="line"></span><br><span class="line">prompt_template = ChatPromptTemplate([</span><br><span class="line">    (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªå‰å®³çš„äººå·¥æ™ºèƒ½åŠ©æ‰‹&quot;</span>),</span><br><span class="line">    MessagesPlaceholder(<span class="string">&quot;messages&quot;</span>), <span class="comment"># ç›¸å½“æ’å…¥äº†ä¸€ä¸ªå«messagesçš„å˜é‡ï¼Œç”¨äºå äº†ä¸ªä½ç½®</span></span><br><span class="line">    <span class="comment"># (&quot;placeholder&quot;, &quot;&#123;messages&#125;&quot;), # ä¸MessagesPlaceholder(&quot;messages&quot;)ç­‰æ•ˆå†™æ³•</span></span><br><span class="line">])</span><br><span class="line">result = prompt_template.invoke(&#123;<span class="string">&quot;messages&quot;</span>: [HumanMessage(<span class="string">&quot;ä½ å¥½&quot;</span>)]&#125;)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>ä½¿ç”¨Messageç»„åˆæ¨¡ç‰ˆ</p>
<ul>
<li><code>HumanMessage</code>ï¼šä»£è¡¨ç”¨æˆ·çš„æ¶ˆæ¯</li>
<li><code>AIMessage</code>ï¼šä»£è¡¨æ¨¡å‹è¾“å‡ºçš„æ¶ˆæ¯</li>
<li><code>SystemMessage</code>ï¼šä»£è¡¨ç³»ç»Ÿæ¶ˆæ¯</li>
<li><code>FunctionMessage</code>ï¼šè¡¨ç¤ºå‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œè¯¥å‚æ•°ä¸ºè¢«è°ƒç”¨çš„å‡½æ•°çš„åç§°</li>
<li><code>ToolMessage</code>ï¼šè¡¨ç¤ºå·¥å…·è°ƒç”¨çš„ç»“æœï¼Œä¸FunctionMessageä¸åŒï¼Œæ˜¯ä¸ºäº†åŒ¹é…OpenAIçš„functionå’Œtoolæ¶ˆæ¯ç±»å‹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.messages <span class="keyword">import</span> SystemMessage, HumanMessage, AIMessage</span><br><span class="line"></span><br><span class="line">sy = SystemMessage(</span><br><span class="line">    content=<span class="string">&quot;ä½ æ˜¯ä¸€åèµ·åå¤§å¸ˆ&quot;</span>,</span><br><span class="line">    additional_kwargs=&#123;<span class="string">&quot;å¤§å¸ˆå§“å&quot;</span>: <span class="string">&quot;é™ˆçå­&quot;</span>&#125;</span><br><span class="line">)</span><br><span class="line">hu = HumanMessage(</span><br><span class="line">    content=<span class="string">&quot;è¯·é—®å¤§å¸ˆå«ä»€ä¹ˆ&quot;</span></span><br><span class="line">)</span><br><span class="line">ai = AIMessage(</span><br><span class="line">    content=<span class="string">&quot;æˆ‘å«é™ˆçå­&quot;</span></span><br><span class="line">)</span><br><span class="line">messages = [sy, hu, ai]</span><br><span class="line"><span class="built_in">print</span>(messages)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>è‡ªå®šä¹‰æç¤ºè¯æ¨¡ç‰ˆï¼ˆä¸å¸¸ç”¨ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"><span class="keyword">import</span> inspect</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAI</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> StringPromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªç®€å•çš„å‡½æ•°ä½œä¸ºç¤ºä¾‹æ•ˆæœ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_word</span>(<span class="params">abc</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> abc</span><br><span class="line"></span><br><span class="line">PROMPT = <span class="string">&quot;&quot;&quot;\</span></span><br><span class="line"><span class="string">ä½ æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç»éªŒå’Œå¤©èµ‹çš„ç¨‹åºå‘˜ï¼Œç°åœ¨ç»™ä½ å¦‚ä¸‹å‡½æ•°åç§°ï¼Œä½ ä¼šæŒ‰ç…§å¦‚ä¸‹æ ¼å¼ï¼Œè¾“å‡ºè¿™æ®µä»£ç çš„åç§°ã€æºä»£ç ã€ä¸­æ–‡è§£é‡Šã€‚</span></span><br><span class="line"><span class="string">å‡½æ•°åç§°ï¼š&#123;function_name&#125;</span></span><br><span class="line"><span class="string">æºä»£ç ï¼š</span></span><br><span class="line"><span class="string">&#123;source_code&#125;</span></span><br><span class="line"><span class="string">ä»£ç è§£é‡Šï¼š</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_source_code</span>(<span class="params">function_name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è·å–å‡½æ•°çš„æºä»£ç </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> inspect.getsource(function_name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomPromptTemplate</span>(<span class="title class_ inherited__">StringPromptTemplate</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è‡ªå®šä¹‰æ¨¡ç‰ˆ</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">format</span>(<span class="params">self, **kwargs</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="comment"># è·å–å‡½æ•°çš„æºä»£ç </span></span><br><span class="line">        source_code = get_source_code(kwargs[<span class="string">&quot;function_name&quot;</span>])</span><br><span class="line">        <span class="comment"># ç”Ÿæˆæç¤ºè¯æ¨¡ç‰ˆ</span></span><br><span class="line">        prompt = PROMPT.<span class="built_in">format</span>(</span><br><span class="line">            function_name=kwargs[<span class="string">&quot;function_name&quot;</span>].__name__,</span><br><span class="line">            source_code=source_code</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> prompt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨è‡ªå®šä¹‰çš„æç¤ºè¯æ¨¡ç‰ˆï¼Œè€Œä¸æ˜¯ç±»ä¼¼å¯¹è¯æç¤ºè¯æ¨¡ç‰ˆ</span></span><br><span class="line">a = CustomPromptTemplate(input_variables=[<span class="string">&quot;function_name&quot;</span>])</span><br><span class="line">res = a.<span class="built_in">format</span>(function_name=hello_word)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ ¼å¼åŒ–ä¹‹åçš„æç¤ºè¯ä¸º==============&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line">api_base = os.getenv(<span class="string">&quot;OPENAI_API_BASE&quot;</span>)</span><br><span class="line">api_key = os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line">llm = OpenAI(</span><br><span class="line">    <span class="comment"># model_name=&quot;gpt-3.5-turbo&quot;,</span></span><br><span class="line">    temperature=<span class="number">0.2</span>,</span><br><span class="line">    base_url=api_base,</span><br><span class="line">    api_key=api_key,</span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç»“åˆLLMè¾“å‡ºçš„ç»“æœ==============&gt;&quot;</span>)</span><br><span class="line">msg = llm.invoke(res)</span><br><span class="line"><span class="built_in">print</span>(msg)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ChatMessagePromptTemplate"><a href="#ChatMessagePromptTemplate" class="headerlink" title="ChatMessagePromptTemplate"></a>ChatMessagePromptTemplate</h2><p><code>ChatMessagePromptTemplate</code>å¯ä»¥ç»“åˆ <code>ChatPromptTemplate</code>ä½¿ç”¨ï¼ŒåŒæ—¶å¯¹æç¤ºè¯æ¨¡æ¿å’Œæ¶ˆæ¯ä½“è¿›è¡ŒæŠ½è±¡å’Œå¤ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate, ChatMessagePromptTemplate</span><br><span class="line"></span><br><span class="line">system_template = ChatMessagePromptTemplate.from_template(</span><br><span class="line">    template=<span class="string">&quot;ä½ æ˜¯ä¸€ä½&#123;role&#125;ä¸“å®¶ï¼Œæ“…é•¿å›ç­”&#123;domain&#125;é¢†åŸŸçš„é—®é¢˜ã€‚&quot;</span>,</span><br><span class="line">    role=<span class="string">&quot;system&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">human_template = ChatMessagePromptTemplate.from_template(</span><br><span class="line">    template=<span class="string">&quot;ç”¨æˆ·é—®é¢˜ï¼š&#123;question&#125;&quot;</span>,</span><br><span class="line">    role=<span class="string">&quot;human&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">chat_prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">    system_template,</span><br><span class="line">    human_template,</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">messages = chat_prompt.format_messages(</span><br><span class="line">    role=<span class="string">&quot;æŠ€æœ¯&quot;</span>,</span><br><span class="line">    domain=<span class="string">&quot;Webå¼€å‘&quot;</span>,</span><br><span class="line">    question=<span class="string">&quot;å¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºVueçš„å‰ç«¯åº”ç”¨ï¼Ÿ&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(messages)</span><br></pre></td></tr></table></figure>
<h1 id="FewShotPromptTemplateï¼ˆå°‘æ ·æœ¬æç¤ºæ¨¡æ¿ï¼‰"><a href="#FewShotPromptTemplateï¼ˆå°‘æ ·æœ¬æç¤ºæ¨¡æ¿ï¼‰" class="headerlink" title="FewShotPromptTemplateï¼ˆå°‘æ ·æœ¬æç¤ºæ¨¡æ¿ï¼‰"></a><code>FewShotPromptTemplate</code>ï¼ˆå°‘æ ·æœ¬æç¤ºæ¨¡æ¿ï¼‰</h1><p>FueShotï¼ˆå°‘é‡ç¤ºä¾‹ï¼‰æç¤ºè¯æŠ€å·§ï¼Œé€šè¿‡ä¸¾ä¾‹å­å¸®åŠ©å¤§æ¨¡å‹å¿«é€Ÿç†è§£æ–°ä»»åŠ¡ï¼Œç»“åˆä»£ç æ¼”ç¤ºåœ¨lunchinä¸­å¦‚ä½•ä½¿ç”¨Few Shotæå‡å›ç­”å‡†ç¡®æ€§ï¼Œå¼ºè°ƒç¤ºä¾‹è´¨é‡ä¸ä»»åŠ¡ç›¸å…³æ€§çš„é‡è¦æ€§ã€‚</p>
<p>FueShoutçš„æ ¸å¿ƒæ€æƒ³æ˜¯ç»™æ¨¡å‹æä¾›ç¤ºä¾‹ï¼Œæ¨¡ä»¿è¾“å‡ºå®Œæˆæ–°ä»»åŠ¡</p>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250829163851831.png" alt="image-20250829163851831" style="zoom:50%;" /></p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç”¨äº<strong>å°‘æ ·æœ¬å­¦ä¹ </strong>ï¼ˆFew-Shot Learningï¼‰ï¼Œåœ¨æç¤ºä¸­åŒ…å«ç¤ºä¾‹ï¼ˆExamplesï¼‰ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£ä»»åŠ¡ã€‚</li>
<li>é€‚ç”¨äºå¤æ‚ä»»åŠ¡ï¼ˆå¦‚ç¿»è¯‘ã€åˆ†ç±»ã€æ¨ç†ï¼‰ï¼Œéœ€è¦é€šè¿‡ç¤ºä¾‹å¼•å¯¼æ¨¡å‹è¡Œä¸ºã€‚</li>
</ul>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ç¤ºä¾‹åµŒå…¥</strong>ï¼šé€šè¿‡ <code>examples</code> å‚æ•°æä¾›ç¤ºä¾‹è¾“å…¥å’Œè¾“å‡ºã€‚</li>
<li><strong>åŠ¨æ€ç¤ºä¾‹é€‰æ‹©</strong>ï¼šæ”¯æŒ <code>ExampleSelector</code> åŠ¨æ€é€‰æ‹©æœ€ç›¸å…³çš„ç¤ºä¾‹ã€‚</li>
<li><strong>æ¨¡æ¿æ ¼å¼</strong>ï¼šé€šå¸¸åŒ…å«å‰ç¼€ï¼ˆPrefixï¼‰ã€ç¤ºä¾‹ï¼ˆExamplesï¼‰å’Œåç¼€ï¼ˆSuffixï¼‰ã€‚</li>
</ul>
<h2 id="ZeroShotï¼ˆé›¶ç¤ºä¾‹ï¼‰"><a href="#ZeroShotï¼ˆé›¶ç¤ºä¾‹ï¼‰" class="headerlink" title="ZeroShotï¼ˆé›¶ç¤ºä¾‹ï¼‰"></a>ZeroShotï¼ˆé›¶ç¤ºä¾‹ï¼‰</h2><p>ä¼šå¯¼è‡´ä½è´¨é‡å›ç­”ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">api_base = os.getenv(<span class="string">&quot;OPENAI_API_BASE&quot;</span>)</span><br><span class="line">api_key = os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line">model = ChatOpenAI(</span><br><span class="line">    temperature=<span class="number">0.2</span>,</span><br><span class="line">    base_url=api_base,</span><br><span class="line">    api_key=api_key,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">res = model.invoke(<span class="string">&quot;What is 2 ğŸ¦ 9ï¼Ÿ&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
<h2 id="FewShotï¼ˆå°‘é‡ç¤ºä¾‹ï¼‰"><a href="#FewShotï¼ˆå°‘é‡ç¤ºä¾‹ï¼‰" class="headerlink" title="FewShotï¼ˆå°‘é‡ç¤ºä¾‹ï¼‰"></a>FewShotï¼ˆå°‘é‡ç¤ºä¾‹ï¼‰</h2><p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="comment"># å¢åŠ æç¤ºè¯</span></span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate, FewShotChatMessagePromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">api_base = os.getenv(<span class="string">&quot;OPENAI_API_BASE&quot;</span>)</span><br><span class="line">api_key = os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line">model = ChatOpenAI(</span><br><span class="line">    temperature=<span class="number">0.2</span>,</span><br><span class="line">    base_url=api_base,</span><br><span class="line">    api_key=api_key,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¢åŠ ç¤ºä¾‹ç»„</span></span><br><span class="line">examples = [</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;2 ğŸ¦ 2&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;4&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;2 ğŸ¦ 3&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;5&quot;</span>&#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment"># æ„é€ æç¤ºè¯æ¨¡æ¿</span></span><br><span class="line">example_prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">    (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;&#123;input&#125;&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;ai&quot;</span>, <span class="string">&quot;&#123;output&#125;&quot;</span>),</span><br><span class="line">])</span><br><span class="line"><span class="comment"># ç»„åˆç¤ºä¾‹ä¸æç¤ºè¯</span></span><br><span class="line">few_shot_prompt = FewShotChatMessagePromptTemplate(</span><br><span class="line">    <span class="comment"># æç¤ºè¯æ¨¡æ¿</span></span><br><span class="line">    example_prompt=example_prompt,</span><br><span class="line">    <span class="comment"># ç¤ºä¾‹ç»„</span></span><br><span class="line">    examples=examples,</span><br><span class="line">)</span><br><span class="line"><span class="comment"># æ‰“å°æç¤ºè¯æ¨¡æ¿</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç»„åˆä¹‹åçš„æç¤ºè¯ä¸º=====================ã€‹&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(few_shot_prompt.invoke(&#123;&#125;).to_messages())</span><br><span class="line"><span class="comment"># æ„é€ æœ€ç»ˆæç¤ºè¯</span></span><br><span class="line">final_prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">    (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;ä½ æ˜¯ä¸€ä½ç¥å¥‡çš„æ•°å­¦å¥‡æ‰.&quot;</span>),</span><br><span class="line">    few_shot_prompt,</span><br><span class="line">    (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;&#123;input&#125;&quot;</span>)</span><br><span class="line">])</span><br><span class="line"><span class="comment"># é‡æ–°æé—®</span></span><br><span class="line">chain = final_prompt | model</span><br><span class="line">result = chain.invoke(&#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;what is 2 ğŸ¦ 9?&quot;</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;é‡æ–°æé—®ç»“æœä¸º=====================ã€‹&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<p>æ¯”è¾ƒå®é™…çš„ä¸€ä¸ªåœºæ™¯ï¼šè¾“å…¥Bugæ–‡æœ¬ â€”&gt; è¾“å‡ºBugç±»å‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> FewShotPromptTemplate, PromptTemplate</span><br><span class="line"></span><br><span class="line">examples = [</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;ç‚¹å‡»ç™»å½•æŒ‰é’®æ— ååº”&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;åŠŸèƒ½ç¼ºå¤±&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;åŠ è½½é¡µé¢å¡é¡¿è¶…è¿‡10ç§’&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;æ€§èƒ½é—®é¢˜&quot;</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">example_prompt = PromptTemplate(</span><br><span class="line">    input_variables=[<span class="string">&quot;input&quot;</span>, <span class="string">&quot;output&quot;</span>],</span><br><span class="line">    template=<span class="string">&quot;Bugæè¿°ï¼š&#123;input&#125;\nBugç±»å‹ï¼š&#123;output&#125;&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">few_shot_prompt = FewShotPromptTemplate(</span><br><span class="line">    <span class="comment"># æ ·æœ¬</span></span><br><span class="line">    examples=examples,</span><br><span class="line">    <span class="comment"># æ ·æ¿æ ¼å¼</span></span><br><span class="line">    example_prompt=example_prompt,</span><br><span class="line">    <span class="comment"># æç¤ºè¯æœ€å‰çš„ä¸€å¥è¯</span></span><br><span class="line">    prefix=<span class="string">&quot;è¯·æ ¹æ®ä»¥ä¸‹ç¤ºä¾‹åˆ¤æ–­Bugç±»å‹ï¼š&quot;</span>,</span><br><span class="line">    <span class="comment"># æç¤ºè¯æœ€åé¢çš„ä¸€å¥è¯</span></span><br><span class="line">    suffix=<span class="string">&quot;Bugæè¿°ï¼š&#123;user_input&#125;\nBugç±»å‹ï¼š&quot;</span>,</span><br><span class="line">    <span class="comment"># ç”¨æˆ·è¾“å…¥çš„å˜é‡</span></span><br><span class="line">    input_variables=[<span class="string">&quot;user_input&quot;</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(few_shot_prompt.<span class="built_in">format</span>(user_input=<span class="string">&quot;ç”¨æˆ·å¤´åƒæ— æ³•ä¸Šä¼ &quot;</span>))</span><br></pre></td></tr></table></figure>
<h1 id="MessagesPlaceholder-æ’å…¥å¯¹è¯å†å²"><a href="#MessagesPlaceholder-æ’å…¥å¯¹è¯å†å²" class="headerlink" title="MessagesPlaceholder(æ’å…¥å¯¹è¯å†å²)"></a>MessagesPlaceholder(æ’å…¥å¯¹è¯å†å²)</h1><p>å¯å°†å†å²å¯¹è¯çš„ä¿¡æ¯æ’å…¥åˆ°ä¸€ä¸ªå¤šè½®æœµèŠ±ä¸­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate, MessagesPlaceholder</span><br><span class="line"></span><br><span class="line">chat_template = ChatPromptTemplate.from_messages([</span><br><span class="line">    (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ª AI æµ‹è¯•åŠ©æ‰‹&quot;</span>),</span><br><span class="line">    MessagesPlaceholder(variable_name=<span class="string">&quot;history&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;&#123;input&#125;&quot;</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<h1 id="ç¤ºä¾‹é€‰æ‹©å™¨"><a href="#ç¤ºä¾‹é€‰æ‹©å™¨" class="headerlink" title="ç¤ºä¾‹é€‰æ‹©å™¨"></a>ç¤ºä¾‹é€‰æ‹©å™¨</h1><p>åŠ¨æ€ç¤ºä¾‹æ˜¯æŒ‡æ ¹æ®ä»»åŠ¡éœ€æ±‚åŠ¨æ€é€‰æ‹©åˆé€‚çš„æç¤ºè¯ç¤ºä¾‹ï¼Œä»¥é€‚åº”æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£é™åˆ¶å¹¶æé«˜ç›¸å…³æ€§ã€‚ä¸é™æ€ç¤ºä¾‹ä¸åŒï¼ŒåŠ¨æ€ç¤ºä¾‹ä¸å›ºå®šåœ¨æ¨¡æ¿ä¸­ï¼Œè€Œæ˜¯é€šè¿‡é€‰æ‹©å™¨æŒ‰éœ€ç­›é€‰ç¤ºä¾‹ï¼Œå¦‚æ ¹æ®é•¿åº¦ã€è¯­ä¹‰ç›¸ä¼¼åº¦æˆ–å‘é‡ç›¸ä¼¼åº¦è¿›è¡Œé€‰æ‹©ï¼Œä»è€Œä¼˜åŒ–æç¤ºè¯ç»„æˆï¼Œç¡®ä¿æ¨¡å‹è¾“å…¥æ—¢ç¬¦åˆé•¿åº¦è¦æ±‚åˆä¸ä»»åŠ¡é«˜åº¦ç›¸å…³ã€‚</p>
<p>åŠ¨æ€æç¤ºè¯ç¤ºä¾‹ä¸é™æ€æç¤ºè¯ç¤ºä¾‹çš„åŒºåˆ«</p>
<ul>
<li><p>åŠ¨æ€æç¤ºè¯ç¤ºä¾‹å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚åŠ¨æ€é€‰æ‹©åˆé€‚çš„æç¤ºè¯å†…å®¹ï¼Œè€Œé™æ€ç¤ºä¾‹æ˜¯å†™æ­»åœ¨æ¨¡æ¿ä¸­çš„ï¼Œæ— æ³•æ”¹å˜ã€‚</p>
</li>
<li><p>é™æ€ç¤ºä¾‹çš„é•¿åº¦å›ºå®šï¼Œå¯èƒ½å ç”¨æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼Œé™åˆ¶çµæ´»æ€§ã€‚</p>
</li>
<li><p>åŠ¨æ€ç¤ºä¾‹é€šè¿‡å‚æ•°æ§åˆ¶ï¼Œå¯ä»¥åœ¨ä¸åŒä»»åŠ¡ä¸­åˆ‡æ¢ä¸åŒçš„æç¤ºè¯å†…å®¹ï¼Œä¼˜åŒ–ä¸Šä¸‹æ–‡çª—å£ä½¿ç”¨ã€‚</p>
</li>
</ul>
<p>åŠ¨æ€æç¤ºè¯ç¤ºä¾‹çš„é€‰æ‹©ç­–ç•¥</p>
<ul>
<li><p>æ ¹æ®é•¿åº¦é€‰æ‹©ï¼šåŸºäºè¾“å…¥å’Œä¸Šä¸‹æ–‡çª—å£å‰©ä½™é•¿åº¦åŠ¨æ€é€‰æ‹©åˆé€‚çš„æç¤ºè¯ç¤ºä¾‹ã€‚</p>
</li>
<li><p>æ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦é€‰æ‹©ï¼šé€šè¿‡å‘é‡ç©ºé—´è®¡ç®—ä»»åŠ¡ä¸ç¤ºä¾‹ä¹‹é—´çš„è¯­ä¹‰åŒ¹é…åº¦è¿›è¡Œç­›é€‰ã€‚</p>
</li>
<li><p>æœ€å¤§è¾¹é™…ç›¸å…³æ€§ï¼ˆMMRï¼‰é€‰æ‹©ï¼šç»¼åˆè€ƒè™‘è¯­ä¹‰ç›¸å…³æ€§å’Œå¤šæ ·æ€§ï¼Œé¿å…é‡å¤ä¿¡æ¯ã€‚</p>
</li>
</ul>
<h2 id="æ ¹æ®é•¿åº¦åŠ¨æ€é€‰æ‹©æç¤ºè¯ç¤ºä¾‹"><a href="#æ ¹æ®é•¿åº¦åŠ¨æ€é€‰æ‹©æç¤ºè¯ç¤ºä¾‹" class="headerlink" title="æ ¹æ®é•¿åº¦åŠ¨æ€é€‰æ‹©æç¤ºè¯ç¤ºä¾‹"></a>æ ¹æ®é•¿åº¦åŠ¨æ€é€‰æ‹©æç¤ºè¯ç¤ºä¾‹</h2><p>ä½¿ç”¨LengthBasedExampleSelectorå®ç°åŸºäºé•¿åº¦çš„åŠ¨æ€æç¤ºè¯é€‰æ‹©ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.example_selectors <span class="keyword">import</span> LengthBasedExampleSelector</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> FewShotPromptTemplate, PromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡è®¾å·²ç»æœ‰è¿™ä¹ˆå¤šçš„æç¤ºè¯ç¤ºä¾‹ç»„ï¼š</span></span><br><span class="line">examples = [</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;happy&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;sad&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;tall&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;short&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;sunny&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;gloomy&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;windy&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;calm&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;é«˜å…´&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;æ‚²ä¼¤&quot;</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„é€ æç¤ºè¯æ¨¡æ¿</span></span><br><span class="line">example_prompt = PromptTemplate(</span><br><span class="line">    input_variables=[<span class="string">&quot;input&quot;</span>, <span class="string">&quot;output&quot;</span>],</span><br><span class="line">    template=<span class="string">&quot;åŸè¯: &#123;input&#125;\nåä¹‰: &#123;output&#125;&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨é•¿åº¦ç¤ºä¾‹é€‰æ‹©å™¨</span></span><br><span class="line">example_selector = LengthBasedExampleSelector(</span><br><span class="line">    <span class="comment"># ä¼ å…¥æç¤ºè¯æ¨¡æ¿</span></span><br><span class="line">    example_prompt=example_prompt,</span><br><span class="line">    <span class="comment"># ä¼ å…¥ç¤ºä¾‹ç»„</span></span><br><span class="line">    examples=examples,</span><br><span class="line">    <span class="comment"># è®¾ç½®æ ¼å¼åŒ–åçš„æç¤ºè¯æœ€å¤§é•¿åº¦</span></span><br><span class="line">    max_length=<span class="number">25</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å°æ ·æœ¬æç¤ºè¯æ¨¡æ¿æ¥å®ç°åŠ¨æ€ç¤ºä¾‹çš„è°ƒç”¨</span></span><br><span class="line">dynamic_prompt = FewShotPromptTemplate(</span><br><span class="line">    <span class="comment"># ä¼ å…¥ç¤ºä¾‹é€‰æ‹©å™¨</span></span><br><span class="line">    example_selector=example_selector,</span><br><span class="line">    <span class="comment"># ä¼ å…¥æç¤ºè¯æ¨¡æ¿</span></span><br><span class="line">    example_prompt=example_prompt,</span><br><span class="line">    <span class="comment"># ä¼ å…¥å‰ç¼€</span></span><br><span class="line">    prefix=<span class="string">&quot;è¯·ç»™å‡ºä»¥ä¸‹è¯çš„åä¹‰è¯ï¼š&quot;</span>,</span><br><span class="line">    <span class="comment"># ä¼ å…¥åç¼€</span></span><br><span class="line">    suffix=<span class="string">&quot;åŸè¯ï¼š&#123;adjective&#125;\nåä¹‰ï¼š&quot;</span>,</span><br><span class="line">    <span class="comment"># ä¼ å…¥è¾“å…¥å˜é‡</span></span><br><span class="line">    input_variables=[<span class="string">&quot;adjective&quot;</span>],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°æ ·æœ¬è·å¾—æ‰€æœ‰ç¤ºä¾‹ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘è¾“å…¥çš„æç¤ºè¯é•¿åº¦</span></span><br><span class="line"><span class="built_in">print</span>(dynamic_prompt.<span class="built_in">format</span>(adjective=<span class="string">&quot;big&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœè¾“å…¥é•¿åº¦å¾ˆé•¿ï¼Œæœ€ç»ˆè¾“å‡ºä¼šæ ¹æ®é•¿åº¦è¦æ±‚å‡å°‘(é•¿åº¦æº¢å‡ºï¼Œä¼šå°†ç¤ºä¾‹ç»„è¿›è¡Œåˆ é™¤ï¼Œå¯èƒ½å°±ä¼šåŒ¹é…ä¸åˆ°æƒ³è¦çš„ç¤ºä¾‹ç»„)</span></span><br><span class="line">long_string = <span class="string">&quot;really big and huge and massive and gigantic and enormous and large and much bigger than very big&quot;</span></span><br><span class="line"><span class="built_in">print</span>(dynamic_prompt.<span class="built_in">format</span>(adjective=long_string))</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼˜ç‚¹ï¼šæé«˜ä¸Šä¸‹æ–‡çª—å£åˆ©ç”¨ç‡ï¼Œå‡å°‘ä¸å¿…è¦å¹²æ‰°ï¼›æ”¯æŒå¤šä»»åŠ¡å¤ç”¨æç¤ºè¯æ¨¡æ¿ã€‚</li>
<li>ç¼ºç‚¹ï¼šåŸºäºé•¿åº¦çš„é€‰æ‹©æ–¹å¼è¾ƒä¸ºæœºæ¢°ï¼Œå¯èƒ½å¿½ç•¥è¯­ä¹‰ç›¸å…³æ€§ï¼ˆé•¿åº¦æº¢å‡ºï¼Œä¼šå°†ç¤ºä¾‹ç»„è¿›è¡Œåˆ é™¤ï¼Œå¯èƒ½å°±ä¼šåŒ¹é…ä¸åˆ°æƒ³è¦çš„ç¤ºä¾‹ç»„ï¼‰ï¼›è¯­ä¹‰ç›¸ä¼¼åº¦æ–¹æ³•éœ€è¦é¢å¤–è®¡ç®—èµ„æºã€‚</li>
</ul>
<h2 id="æ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦é€‰æ‹©æç¤ºè¯ç¤ºä¾‹"><a href="#æ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦é€‰æ‹©æç¤ºè¯ç¤ºä¾‹" class="headerlink" title="æ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦é€‰æ‹©æç¤ºè¯ç¤ºä¾‹"></a>æ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦é€‰æ‹©æç¤ºè¯ç¤ºä¾‹</h2><p>é€šè¿‡è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…è¾“å…¥ä¸ç¤ºä¾‹ç»„ä¸­çš„å‘é‡æ•°æ®ï¼Œåˆ©ç”¨ä½™å¼¦ç›¸ä¼¼åº¦ç®—æ³•åœ¨å‘é‡æ•°æ®åº“ä¸­æœç´¢æœ€ç›¸å…³çš„ç»“æœï¼Œå¹¶è¿”å›Top Kæ¡åŒ¹é…å†…å®¹ï¼Œå®ç°åŠ¨æ€ç­›é€‰å’Œç²¾å‡†è¾“å‡ºã€‚</p>
<ul>
<li>ç­›é€‰ç¤ºä¾‹ç»„ä¸­ä¸è¾“å…¥çš„è¯­ä¹‰ç›¸ä¼¼åº¦æœ€é«˜çš„ç¤ºä¾‹</li>
<li>æœ¬è´¨ï¼šå°†é—®é¢˜ä¸ç¤ºä¾‹åµŒå…¥å‘é‡ç©ºé—´åè¿›è¡Œæœç´¢æ¯”å¯¹</li>
<li>ä¾èµ–ï¼šå‘é‡æ•°æ®åº“</li>
</ul>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250902111419077.png" alt="image-20250902111419077" style="zoom:80%;" /></p>
<p>ä½¿ç”¨SemanticSimilarityExampleSelectorå®ç°åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„åŠ¨æ€æç¤ºè¯é€‰æ‹©ã€‚</p>
<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨æœ€å¤§ä½™å¼¦ç›¸ä¼¼åº¦æ¥æ£€ç´¢ç›¸å…³ç¤ºä¾‹ï¼Œä»¥ä½¿ç¤ºä¾‹å°½é‡ç¬¦åˆè¾“å…¥</span></span><br><span class="line"><span class="comment"># Use the maximum cosine similarity to retrieve relevant examples to make the examples as close as possible to the input</span></span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> Chroma</span><br><span class="line"><span class="keyword">from</span> langchain_core.example_selectors <span class="keyword">import</span> SemanticSimilarityExampleSelector</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> FewShotPromptTemplate, PromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">api_base = os.getenv(<span class="string">&quot;OPENAI_API_BASE&quot;</span>)</span><br><span class="line">api_key = os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">example_prompt = PromptTemplate(</span><br><span class="line">    input_variables=[<span class="string">&quot;input&quot;</span>, <span class="string">&quot;output&quot;</span>],</span><br><span class="line">    template=<span class="string">&quot;åŸè¯: &#123;input&#125;\nåä¹‰: &#123;output&#125;&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#  ä¸€ç»„ç¤ºä¾‹åŒ…å«å„ç§æ€§è´¨çš„åä¹‰è¯</span></span><br><span class="line"><span class="comment"># Examples of a pretend task of creating antonyms.</span></span><br><span class="line">examples = [</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;happy&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;sad&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;tall&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;short&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;energetic&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;lethargic&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;sunny&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;gloomy&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>: <span class="string">&quot;windy&quot;</span>, <span class="string">&quot;output&quot;</span>: <span class="string">&quot;calm&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>:<span class="string">&quot;é«˜å…´&quot;</span>,<span class="string">&quot;output&quot;</span>:<span class="string">&quot;æ‚²ä¼¤&quot;</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">example_selector = SemanticSimilarityExampleSelector.from_examples(</span><br><span class="line">    <span class="comment"># ä¼ å…¥ç¤ºä¾‹ç»„.</span></span><br><span class="line">    <span class="comment"># Pass in the example group.</span></span><br><span class="line">    examples,</span><br><span class="line">    <span class="comment"># ä½¿ç”¨openAIåµŒå…¥æ¥åšç›¸ä¼¼æ€§æœç´¢</span></span><br><span class="line">    <span class="comment"># Use openAI embeddings for similarity search</span></span><br><span class="line">    OpenAIEmbeddings(openai_api_key=api_key,openai_api_base=api_base),</span><br><span class="line">    <span class="comment"># ä½¿ç”¨Chromaå‘é‡æ•°æ®åº“æ¥å®ç°å¯¹ç›¸ä¼¼ç»“æœçš„è¿‡ç¨‹å­˜å‚¨</span></span><br><span class="line">    <span class="comment"># Use the Chroma vector database to implement the process storage of similar results</span></span><br><span class="line">    Chroma,</span><br><span class="line">    <span class="comment"># ç»“æœæ¡æ•°</span></span><br><span class="line">    <span class="comment"># Number of results</span></span><br><span class="line">    k=<span class="number">2</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨å°æ ·æœ¬æç¤ºè¯æ¨¡æ¿</span></span><br><span class="line">similar_prompt = FewShotPromptTemplate(</span><br><span class="line">    <span class="comment"># ä¼ å…¥é€‰æ‹©å™¨å’Œæ¨¡æ¿ä»¥åŠå‰ç¼€åç¼€å’Œè¾“å…¥å˜é‡</span></span><br><span class="line">    <span class="comment"># Pass in the selector and template, as well as the prefix and suffix and input variables</span></span><br><span class="line">    example_selector=example_selector,</span><br><span class="line">    example_prompt=example_prompt,</span><br><span class="line">    prefix=<span class="string">&quot;ç»™å‡ºæ¯ä¸ªè¾“å…¥è¯çš„åä¹‰è¯&quot;</span>,</span><br><span class="line">    suffix=<span class="string">&quot;åŸè¯: &#123;adjective&#125;\nåä¹‰:&quot;</span>,</span><br><span class="line">    input_variables=[<span class="string">&quot;adjective&quot;</span>],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å…¥ä¸€ä¸ªå½¢å®¹æ„Ÿè§‰çš„è¯è¯­ï¼Œåº”è¯¥æŸ¥æ‰¾è¿‘ä¼¼çš„ happy/sad ç¤ºä¾‹</span></span><br><span class="line"><span class="built_in">print</span>(similar_prompt.<span class="built_in">format</span>(adjective=<span class="string">&quot;éš¾è¿‡&quot;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="æ ¹æ®MMRä¸æœ€å¤§ä½™å¼¦ç›¸ä¼¼åº¦é€‰æ‹©ç¤ºä¾‹"><a href="#æ ¹æ®MMRä¸æœ€å¤§ä½™å¼¦ç›¸ä¼¼åº¦é€‰æ‹©ç¤ºä¾‹" class="headerlink" title="æ ¹æ®MMRä¸æœ€å¤§ä½™å¼¦ç›¸ä¼¼åº¦é€‰æ‹©ç¤ºä¾‹"></a>æ ¹æ®MMRä¸æœ€å¤§ä½™å¼¦ç›¸ä¼¼åº¦é€‰æ‹©ç¤ºä¾‹</h2><p>æœ€å¤§è¾¹é™…ç›¸å…³æ€§ï¼ˆMMRï¼‰æ˜¯ä¸€ç§åœ¨ä¿¡æ¯æ£€ç´¢ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼Œæ—¨åœ¨å¹³è¡¡ç›¸å…³æ€§å’Œå¤šæ ·æ€§ã€‚å®ƒé€šè¿‡é€‰æ‹©ä¸è¾“å…¥é«˜åº¦ç›¸å…³ä¸”å½¼æ­¤é—´å…·æœ‰è¶³å¤Ÿå·®å¼‚æ€§çš„æ ·æœ¬æ¥é¿å…é‡å¤æˆ–è¿‡äºç›¸ä¼¼çš„ç»“æœï¼Œä»è€Œæé«˜æ£€ç´¢è´¨é‡ã€‚</p>
<ul>
<li>ç­›é€‰ç¤ºä¾‹ç»„ä¸­ç¬¦åˆMMRè§„åˆ™çš„ç¤ºä¾‹</li>
<li>æœ¬è´¨ï¼šå°†é—®é¢˜ä¸ç¤ºä¾‹åµŒå…¥å‘é‡ç©ºé—´åè¿›è¡Œæœç´¢æ¯”å¯¹</li>
<li>ä¾èµ–ï¼šå‘é‡æ•°æ®åº“</li>
<li>MMR: æ˜¯ä¸€ç§åœ¨ä¿¡æ¯æ£€ç´¢ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼Œå®ƒçš„ç›®æ ‡æ˜¯åœ¨ç›¸å…³æ€§å’Œå¤šæ ·æ€§ä¹‹é—´æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ã€‚MMRä¼šé¦–å…ˆæ‰¾å‡ºä¸è¾“å…¥æœ€ç›¸ä¼¼ï¼ˆå³ä½™å¼¦ç›¸ä¼¼åº¦æœ€å¤§ï¼‰çš„æ ·æœ¬ã€‚ç„¶ååœ¨è¿­ä»£æ·»åŠ æ ·æœ¬çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºä¸å·²é€‰æ‹©æ ·æœ¬è¿‡äºæ¥è¿‘ï¼ˆå³ç›¸ä¼¼åº¦è¿‡é«˜ï¼‰çš„æ ·æœ¬è¿›è¡Œæƒ©ç½šã€‚MMRæ—¢èƒ½ç¡®ä¿é€‰å‡ºçš„æ ·æœ¬ä¸è¾“å…¥é«˜åº¦ç›¸å…³ï¼Œåˆèƒ½ä¿è¯é€‰å‡ºçš„æ ·æœ¬ä¹‹é—´æœ‰è¶³å¤Ÿçš„å¤šæ ·æ€§ã€‚å…³æ³¨å¦‚ä½•åœ¨ç›¸å…³æ€§å’Œå¤šæ ·æ€§ä¹‹é—´æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨MMRæ¥æ£€ç´¢ç›¸å…³ç¤ºä¾‹ï¼Œä»¥ä½¿ç¤ºä¾‹å°½é‡ç¬¦åˆè¾“å…¥</span></span><br><span class="line"><span class="comment"># Use MMR to retrieve relevant examples to make the examples as close as possible to the input</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> FAISS</span><br><span class="line"><span class="keyword">from</span> langchain_core.example_selectors <span class="keyword">import</span> (</span><br><span class="line">    MaxMarginalRelevanceExampleSelector,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> FewShotPromptTemplate, PromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"></span><br><span class="line">api_base = os.getenv(<span class="string">&quot;OPENAI_API_BASE&quot;</span>)</span><br><span class="line">api_key = os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å‡è®¾å·²ç»æœ‰è¿™ä¹ˆå¤šçš„æç¤ºè¯ç¤ºä¾‹ç»„ï¼š</span></span><br><span class="line"><span class="comment"># Suppose there are so many prompt examples:</span></span><br><span class="line">examples = [</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>:<span class="string">&quot;happy&quot;</span>,<span class="string">&quot;output&quot;</span>:<span class="string">&quot;sad&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>:<span class="string">&quot;tall&quot;</span>,<span class="string">&quot;output&quot;</span>:<span class="string">&quot;short&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>:<span class="string">&quot;sunny&quot;</span>,<span class="string">&quot;output&quot;</span>:<span class="string">&quot;gloomy&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>:<span class="string">&quot;windy&quot;</span>,<span class="string">&quot;output&quot;</span>:<span class="string">&quot;calm&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;input&quot;</span>:<span class="string">&quot;é«˜å…´&quot;</span>,<span class="string">&quot;output&quot;</span>:<span class="string">&quot;æ‚²ä¼¤&quot;</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ„é€ æç¤ºè¯æ¨¡ç‰ˆ</span></span><br><span class="line"><span class="comment"># Construct prompt template</span></span><br><span class="line">example_prompt = PromptTemplate(</span><br><span class="line">    input_variables=[<span class="string">&quot;input&quot;</span>,<span class="string">&quot;output&quot;</span>],</span><br><span class="line">    template=<span class="string">&quot;åŸè¯ï¼š&#123;input&#125;\nåä¹‰ï¼š&#123;output&#125;&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è°ƒç”¨MMR</span></span><br><span class="line"><span class="comment"># Call MMR</span></span><br><span class="line">example_selector = MaxMarginalRelevanceExampleSelector.from_examples(</span><br><span class="line">    <span class="comment">#ä¼ å…¥ç¤ºä¾‹ç»„</span></span><br><span class="line">    <span class="comment"># Pass in the example group</span></span><br><span class="line">    examples,</span><br><span class="line">    <span class="comment">#ä½¿ç”¨openaiçš„åµŒå…¥æ¥åšç›¸ä¼¼æ€§æœç´¢</span></span><br><span class="line">    <span class="comment"># Use openai&#x27;s embedding for similarity search</span></span><br><span class="line">    OpenAIEmbeddings(openai_api_base=api_base,openai_api_key=api_key),</span><br><span class="line">    <span class="comment">#è®¾ç½®ä½¿ç”¨çš„å‘é‡æ•°æ®åº“æ˜¯ä»€ä¹ˆ</span></span><br><span class="line">    <span class="comment"># Set what vector database is used</span></span><br><span class="line">    FAISS,</span><br><span class="line">    <span class="comment">#ç»“æœæ¡æ•°</span></span><br><span class="line">    <span class="comment"># Number of results</span></span><br><span class="line">    k=<span class="number">2</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨å°æ ·æœ¬æ¨¡ç‰ˆ</span></span><br><span class="line">mmr_prompt = FewShotPromptTemplate(</span><br><span class="line">    example_selector=example_selector,</span><br><span class="line">    example_prompt=example_prompt,</span><br><span class="line">    prefix=<span class="string">&quot;ç»™å‡ºæ¯ä¸ªè¾“å…¥è¯çš„åä¹‰è¯&quot;</span>,</span><br><span class="line">    suffix=<span class="string">&quot;åŸè¯ï¼š&#123;adjective&#125;\nåä¹‰ï¼š&quot;</span>,</span><br><span class="line">    input_variables=[<span class="string">&quot;adjective&quot;</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å½“æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªæè¿°æƒ…ç»ªçš„è¯è¯­çš„æ—¶å€™ï¼Œåº”è¯¥é€‰æ‹©åŒæ ·æ˜¯æè¿°æƒ…ç»ªçš„ä¸€å¯¹ç¤ºä¾‹ç»„æ¥å¡«å……æç¤ºè¯æ¨¡ç‰ˆ</span></span><br><span class="line"><span class="comment"># When we enter a word describing emotions, we should choose a pair of examples that also describe emotions to fill the prompt template</span></span><br><span class="line"><span class="built_in">print</span>(mmr_prompt.<span class="built_in">format</span>(adjective=<span class="string">&quot;éš¾è¿‡&quot;</span>))</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨Partialè¿›è¡Œéƒ¨åˆ†æ ¼å¼åŒ–æ•ˆæœ"><a href="#ä½¿ç”¨Partialè¿›è¡Œéƒ¨åˆ†æ ¼å¼åŒ–æ•ˆæœ" class="headerlink" title="ä½¿ç”¨Partialè¿›è¡Œéƒ¨åˆ†æ ¼å¼åŒ–æ•ˆæœ"></a>ä½¿ç”¨Partialè¿›è¡Œéƒ¨åˆ†æ ¼å¼åŒ–æ•ˆæœ</h1><p>æç¤ºè¯æ¨¡æ¿éƒ¨åˆ†æ ¼å¼åŒ–çš„åŠŸèƒ½ï¼Œé€šè¿‡Partialå±æ€§å®ç°åˆ†æ­¥å¡«å……å‚æ•°ï¼Œé€‚ç”¨äºå¼‚æ­¥è·å–å‚æ•°å€¼æˆ–éœ€åŠ¨æ€ç”Ÿæˆå†…å®¹ï¼ˆå¦‚å½“å‰æ—¶é—´ï¼‰çš„åœºæ™¯ï¼Œæå‡æ¨¡æ¿ä½¿ç”¨çš„çµæ´»æ€§ã€‚</p>
<h2 id="éƒ¨åˆ†æ ¼å¼åŒ–ï¼ˆPartial-Formattingï¼‰åŠå…¶åº”ç”¨åœºæ™¯"><a href="#éƒ¨åˆ†æ ¼å¼åŒ–ï¼ˆPartial-Formattingï¼‰åŠå…¶åº”ç”¨åœºæ™¯" class="headerlink" title="éƒ¨åˆ†æ ¼å¼åŒ–ï¼ˆPartial Formattingï¼‰åŠå…¶åº”ç”¨åœºæ™¯"></a>éƒ¨åˆ†æ ¼å¼åŒ–ï¼ˆPartial Formattingï¼‰åŠå…¶åº”ç”¨åœºæ™¯</h2><p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line"></span><br><span class="line">prompt = PromptTemplate.from_template(<span class="string">&quot;&#123;foo&#125;---&#123;bar&#125;&quot;</span>)</span><br><span class="line">partial_prompt = prompt.partial(foo=<span class="string">&quot;foo-test&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(partial_prompt)</span><br><span class="line"><span class="built_in">print</span>(partial_prompt.<span class="built_in">format</span>(bar=<span class="string">&quot;bar-test&quot;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="åŠ¨æ€å†…å®¹å¤„ç†ä¸å‡½æ•°å¼å‚æ•°ä¼ é€’"><a href="#åŠ¨æ€å†…å®¹å¤„ç†ä¸å‡½æ•°å¼å‚æ•°ä¼ é€’" class="headerlink" title="åŠ¨æ€å†…å®¹å¤„ç†ä¸å‡½æ•°å¼å‚æ•°ä¼ é€’"></a>åŠ¨æ€å†…å®¹å¤„ç†ä¸å‡½æ•°å¼å‚æ•°ä¼ é€’</h2><p>å°†æ¨¡æ¿ä¸­çš„å‚æ•°æ›¿æ¢ä¸ºå‡½æ•°ä»¥æ”¯æŒæ›´çµæ´»çš„æ ¼å¼åŒ–é€»è¾‘</p>
<p>ç¤ºä¾‹ä»£ç ï¼šä½¿ç”¨å‡½æ•°åŠ¨æ€ç”Ÿæˆå½“å‰æ—¶é—´å¹¶åµŒå…¥æç¤ºè¯æ¨¡æ¿ä¸­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™äº›åœºæ™¯éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ï¼šå½“ä½ å¸Œæœ›æç¤ºè¯è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œå§‹ç»ˆæ˜¯å½“å‰çš„æ—¶é—´</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_get_datetime</span>():</span><br><span class="line">    <span class="keyword">return</span> datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line"></span><br><span class="line">prompt = PromptTemplate(</span><br><span class="line">    template=<span class="string">&quot;Tell me a &#123;adjective&#125; joke about the day &#123;date&#125;&quot;</span>,</span><br><span class="line">    input_variables=[<span class="string">&quot;adjective&quot;</span>, <span class="string">&quot;date&quot;</span>],</span><br><span class="line">)</span><br><span class="line">partial_prompt = prompt.partial(date=_get_datetime)</span><br><span class="line"><span class="built_in">print</span>(partial_prompt.<span class="built_in">format</span>(adjective=<span class="string">&quot;funny&quot;</span>))</span><br></pre></td></tr></table></figure>
<h1 id="LangChain-hubåŠ è½½æç¤ºè¯ç®¡ç†"><a href="#LangChain-hubåŠ è½½æç¤ºè¯ç®¡ç†" class="headerlink" title="LangChain hubåŠ è½½æç¤ºè¯ç®¡ç†"></a>LangChain hubåŠ è½½æç¤ºè¯ç®¡ç†</h1><p>Lang Smith æ˜¯ LangChain ç”Ÿæ€ä¸­çš„å•†ä¸šåŒ–äº§å“ï¼Œä¸»è¦ç”¨äºæç¤ºè¯ç®¡ç†ï¼ŒåŒ…å«å¯è§‚æµ‹æ€§ã€è¯„ä¼°å’Œæç¤ºè¯å·¥ç¨‹ä¸‰æ–¹é¢åŠŸèƒ½ã€‚å®ƒæ”¯æŒåº”ç”¨ç›‘æ§ã€AI åº”ç”¨æµ‹è¯•åŠæç¤ºè¯ç‰ˆæœ¬åŒ–ç®¡ç†ï¼Œé€‚åˆå›¢é˜Ÿåä½œä¸é•¿æœŸé¡¹ç›®å¼€å‘ä½¿ç”¨ã€‚</p>
<ul>
<li>ä½¿ç”¨hubåŠ è½½åˆ«äººåˆ†äº«çš„æç¤ºè¯æ¨¡æ¿</li>
<li>ä½¿ç”¨langsmith sdkæ¥åšæç¤ºè¯ç®¡ç†</li>
</ul>
<p>langchain hubï¼š<a target="_blank" rel="noopener" href="https://smith.langchain.com/hub">https://smith.langchain.com/hub</a></p>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250902135805609.png" alt="image-20250902135805609" style="zoom:30%;" /></p>
<p>å®‰è£…ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -qU langsmith </span><br></pre></td></tr></table></figure>
<h2 id="ä»hubä¸ŠåŠ è½½æç¤ºè¯"><a href="#ä»hubä¸ŠåŠ è½½æç¤ºè¯" class="headerlink" title="ä»hubä¸ŠåŠ è½½æç¤ºè¯"></a>ä»hubä¸ŠåŠ è½½æç¤ºè¯</h2><ul>
<li><a target="_blank" rel="noopener" href="https://smith.langchain.com">https://smith.langchain.com</a> æ³¨å†Œå¹¶è·å–API KEY</li>
</ul>
<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langchain <span class="keyword">import</span> hub</span><br><span class="line"></span><br><span class="line">LANGCHAIN_API_KEY=os.environ.get(<span class="string">&quot;API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line">prompt = hub.pull(<span class="string">&quot;rlm/rag-prompt&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(prompt)</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨langsmithæ¥ç®¡ç†æç¤ºè¯"><a href="#ä½¿ç”¨langsmithæ¥ç®¡ç†æç¤ºè¯" class="headerlink" title="ä½¿ç”¨langsmithæ¥ç®¡ç†æç¤ºè¯"></a>ä½¿ç”¨langsmithæ¥ç®¡ç†æç¤ºè¯</h2><ul>
<li>åˆ›å»ºæç¤ºè¯</li>
<li>æµ‹è¯•æç¤ºè¯</li>
<li>è¿­ä»£æç¤ºè¯</li>
</ul>
<p>åˆ›å»ºæç¤ºè¯åä¸Šä¼ åˆ°langsmith</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langsmith <span class="keyword">import</span> Client</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">client = Client(api_key=os.environ.get(<span class="string">&quot;API_KEY&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define the prompt</span></span><br><span class="line"></span><br><span class="line">prompt = ChatPromptTemplate([</span><br><span class="line">(<span class="string">&quot;system&quot;</span>, <span class="string">&quot;ä½ çš„åå­—å«Jeanï¼Œæ˜¯ä¸€åå¸®åŠ©çš„èŠå¤©æœºå™¨äºº.&quot;</span>),</span><br><span class="line">(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;&#123;question&#125;&quot;</span>),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Push the prompt</span></span><br><span class="line"></span><br><span class="line">client.push_prompt(<span class="string">&quot;test1&quot;</span>, <span class="built_in">object</span>=prompt)</span><br></pre></td></tr></table></figure>
<p>è¿œç¨‹æ‹‰å–è‡ªå·±çš„æç¤ºè¯å¹¶ä½¿ç”¨DeepSeekæµ‹è¯•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langsmith <span class="keyword">import</span> Client</span><br><span class="line"><span class="keyword">from</span> langchain_deepseek <span class="keyword">import</span> ChatDeepSeek</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">client = Client(api_key=os.environ.get(<span class="string">&quot;API_KEY&quot;</span>))</span><br><span class="line"></span><br><span class="line">llm = ChatDeepSeek(</span><br><span class="line">    model=<span class="string">&quot;deepseek-chat&quot;</span>,</span><br><span class="line">    api_base=<span class="string">&quot;xxxxxxxxxxxx&quot;</span>,</span><br><span class="line">    api_key=os.environ.get(<span class="string">&quot;API_KEY&quot;</span>),</span><br><span class="line">    temperature=<span class="number">0</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pull the prompt to use</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># You can also specify a specific commit by passing the commit hash &quot;my-prompt:&lt;commit-hash&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">prompt = client.pull_prompt(<span class="string">&quot;test1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Since our prompt only has one variable we could also pass in the value directly</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The code below is equivalent to formatted_prompt = prompt.invoke(&quot;What is the color of the sky?&quot;)</span></span><br><span class="line"></span><br><span class="line">formatted_prompt = prompt.invoke(&#123;<span class="string">&quot;question&quot;</span>: <span class="string">&quot;å¤©ç©ºæ˜¯ä»€ä¹ˆé¢œè‰²çš„?&quot;</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(formatted_prompt)</span><br><span class="line"><span class="comment"># Test the prompt</span></span><br><span class="line"></span><br><span class="line">llm.invoke(formatted_prompt)</span><br></pre></td></tr></table></figure>
<p>å›¢é˜Ÿè¿­ä»£æç¤ºè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langsmith <span class="keyword">import</span> Client</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connect to the LangSmith client</span></span><br><span class="line"></span><br><span class="line">client = Client(api_key=os.environ.get(<span class="string">&quot;API_KEY&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define the prompt to update</span></span><br><span class="line"></span><br><span class="line">new_prompt = ChatPromptTemplate([</span><br><span class="line">(<span class="string">&quot;system&quot;</span>, <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªæœ‰è¶£çš„æœºå™¨äºº. ä½¿ç”¨ä¸­æ–‡å›å¤.&quot;</span>),</span><br><span class="line">(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;&#123;question&#125;&quot;</span>),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Push the updated prompt making sure to use the correct prompt name</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„tagså¯ä»¥æ›´æ–¹ä¾¿è¿›è¡Œç‰ˆæœ¬ç®¡ç†,ä½ ä¹Ÿå¯ä»¥æ‰“æˆv0.0.1è¿™æ ·</span></span><br><span class="line"></span><br><span class="line">client.push_prompt(<span class="string">&quot;test1&quot;</span>, <span class="built_in">object</span>=new_prompt, tags=[<span class="string">&quot;Chinese&quot;</span>])</span><br></pre></td></tr></table></figure>
<h1 id="å¸¸ç”¨æ¨¡æ¿ç±»ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯å¯¹æ¯”"><a href="#å¸¸ç”¨æ¨¡æ¿ç±»ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯å¯¹æ¯”" class="headerlink" title="å¸¸ç”¨æ¨¡æ¿ç±»ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯å¯¹æ¯”"></a>å¸¸ç”¨æ¨¡æ¿ç±»ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯å¯¹æ¯”</h1><p>å¸¸ç”¨æç¤ºè¯æ¨¡æ¿ç±»çš„ç»§æ‰¿å…³ç³»</p>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/image-20250915105216387.png" alt="image-20250915105216387" style="zoom:80%;" /></p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>å­ç±»</strong></th>
<th><strong>é€‚ç”¨æ¨¡å‹ç±»å‹</strong></th>
<th><strong>è¾“å…¥ç±»å‹</strong></th>
<th><strong>ä¸»è¦ç”¨é€”</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PromptTemplate</code></td>
<td>æ–‡æœ¬è¡¥å…¨æ¨¡å‹</td>
<td>å•å­—ç¬¦ä¸²</td>
<td>ç”Ÿæˆå•è½®æ–‡æœ¬ä»»åŠ¡çš„æç¤º</td>
</tr>
<tr>
<td><code>ChatPromptTemplate</code></td>
<td>èŠå¤©æ¨¡å‹</td>
<td>å¤šæ¶ˆæ¯åˆ—è¡¨</td>
<td>æ¨¡æ‹Ÿå¤šè½®å¯¹è¯æˆ–è§’è‰²æ‰®æ¼”</td>
</tr>
<tr>
<td><code>FewShotPromptTemplate</code></td>
<td>æ‰€æœ‰æ¨¡å‹</td>
<td>åŒ…å«ç¤ºä¾‹çš„æ¨¡æ¿</td>
<td>é€šè¿‡ç¤ºä¾‹å¼•å¯¼æ¨¡å‹å®Œæˆå¤æ‚ä»»åŠ¡</td>
</tr>
</tbody>
</table>
</div>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/LangChain/" rel="tag"># LangChain</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/02/05/ai/langchain/16-langchain-LCELChain/" rel="prev" title="LangChain LCELè¡¨è¾¾å¼è¯­è¨€  -- Langchain v0.3">
      <i class="fa fa-chevron-left"></i> LangChain LCELè¡¨è¾¾å¼è¯­è¨€  -- Langchain v0.3
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/02/05/ai/langchain/13-langchain-ChatModels/" rel="next" title="LangChainç»„ä»¶ChatModelsï¼ˆç£¨å¹³ä¸åŒLLMçš„å·®å¼‚ï¼‰-- LangChain v0.3">
      LangChainç»„ä»¶ChatModelsï¼ˆç£¨å¹³ä¸åŒLLMçš„å·®å¼‚ï¼‰-- LangChain v0.3 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%90%E7%A4%BA%E8%AF%8D%EF%BC%9A%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%B7%A5%E4%BD%9C%E7%9A%84%E6%A0%B8%E5%BF%83%E9%83%A8%E4%BB%B6"><span class="nav-number">1.</span> <span class="nav-text">æç¤ºè¯ï¼šå¤§æ¨¡å‹å·¥ä½œçš„æ ¸å¿ƒéƒ¨ä»¶</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#prompts%E6%A8%A1%E6%9D%BF%EF%BC%9A%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%8E%A8%E7%90%86%E7%9A%84%E5%85%B3%E9%94%AE"><span class="nav-number">2.</span> <span class="nav-text">promptsæ¨¡æ¿ï¼šå¤§æ¨¡å‹æ¨ç†çš„å…³é”®</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PromptTemplate%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8F%90%E7%A4%BA%E6%A8%A1%E6%9D%BF%EF%BC%89"><span class="nav-number">3.</span> <span class="nav-text">PromptTemplateï¼ˆå­—ç¬¦ä¸²æç¤ºæ¨¡æ¿ï¼‰</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ChatPromptTemple%EF%BC%88%E8%81%8A%E5%A4%A9%E6%8F%90%E7%A4%BA%E6%A8%A1%E6%9D%BF%EF%BC%89"><span class="nav-number">4.</span> <span class="nav-text">ChatPromptTempleï¼ˆèŠå¤©æç¤ºæ¨¡æ¿ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ChatMessagePromptTemplate"><span class="nav-number">4.1.</span> <span class="nav-text">ChatMessagePromptTemplate</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#FewShotPromptTemplate%EF%BC%88%E5%B0%91%E6%A0%B7%E6%9C%AC%E6%8F%90%E7%A4%BA%E6%A8%A1%E6%9D%BF%EF%BC%89"><span class="nav-number">5.</span> <span class="nav-text">FewShotPromptTemplateï¼ˆå°‘æ ·æœ¬æç¤ºæ¨¡æ¿ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ZeroShot%EF%BC%88%E9%9B%B6%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="nav-number">5.1.</span> <span class="nav-text">ZeroShotï¼ˆé›¶ç¤ºä¾‹ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FewShot%EF%BC%88%E5%B0%91%E9%87%8F%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="nav-number">5.2.</span> <span class="nav-text">FewShotï¼ˆå°‘é‡ç¤ºä¾‹ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MessagesPlaceholder-%E6%8F%92%E5%85%A5%E5%AF%B9%E8%AF%9D%E5%8E%86%E5%8F%B2"><span class="nav-number">6.</span> <span class="nav-text">MessagesPlaceholder(æ’å…¥å¯¹è¯å†å²)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E9%80%89%E6%8B%A9%E5%99%A8"><span class="nav-number">7.</span> <span class="nav-text">ç¤ºä¾‹é€‰æ‹©å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E9%95%BF%E5%BA%A6%E5%8A%A8%E6%80%81%E9%80%89%E6%8B%A9%E6%8F%90%E7%A4%BA%E8%AF%8D%E7%A4%BA%E4%BE%8B"><span class="nav-number">7.1.</span> <span class="nav-text">æ ¹æ®é•¿åº¦åŠ¨æ€é€‰æ‹©æç¤ºè¯ç¤ºä¾‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E8%AF%AD%E4%B9%89%E7%9B%B8%E4%BC%BC%E5%BA%A6%E9%80%89%E6%8B%A9%E6%8F%90%E7%A4%BA%E8%AF%8D%E7%A4%BA%E4%BE%8B"><span class="nav-number">7.2.</span> <span class="nav-text">æ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦é€‰æ‹©æç¤ºè¯ç¤ºä¾‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AEMMR%E4%B8%8E%E6%9C%80%E5%A4%A7%E4%BD%99%E5%BC%A6%E7%9B%B8%E4%BC%BC%E5%BA%A6%E9%80%89%E6%8B%A9%E7%A4%BA%E4%BE%8B"><span class="nav-number">7.3.</span> <span class="nav-text">æ ¹æ®MMRä¸æœ€å¤§ä½™å¼¦ç›¸ä¼¼åº¦é€‰æ‹©ç¤ºä¾‹</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Partial%E8%BF%9B%E8%A1%8C%E9%83%A8%E5%88%86%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%95%88%E6%9E%9C"><span class="nav-number">8.</span> <span class="nav-text">ä½¿ç”¨Partialè¿›è¡Œéƒ¨åˆ†æ ¼å¼åŒ–æ•ˆæœ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E5%88%86%E6%A0%BC%E5%BC%8F%E5%8C%96%EF%BC%88Partial-Formatting%EF%BC%89%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">8.1.</span> <span class="nav-text">éƒ¨åˆ†æ ¼å¼åŒ–ï¼ˆPartial Formattingï¼‰åŠå…¶åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E5%86%85%E5%AE%B9%E5%A4%84%E7%90%86%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="nav-number">8.2.</span> <span class="nav-text">åŠ¨æ€å†…å®¹å¤„ç†ä¸å‡½æ•°å¼å‚æ•°ä¼ é€’</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#LangChain-hub%E5%8A%A0%E8%BD%BD%E6%8F%90%E7%A4%BA%E8%AF%8D%E7%AE%A1%E7%90%86"><span class="nav-number">9.</span> <span class="nav-text">LangChain hubåŠ è½½æç¤ºè¯ç®¡ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8Ehub%E4%B8%8A%E5%8A%A0%E8%BD%BD%E6%8F%90%E7%A4%BA%E8%AF%8D"><span class="nav-number">9.1.</span> <span class="nav-text">ä»hubä¸ŠåŠ è½½æç¤ºè¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8langsmith%E6%9D%A5%E7%AE%A1%E7%90%86%E6%8F%90%E7%A4%BA%E8%AF%8D"><span class="nav-number">9.2.</span> <span class="nav-text">ä½¿ç”¨langsmithæ¥ç®¡ç†æç¤ºè¯</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%A8%A1%E6%9D%BF%E7%B1%BB%E7%89%B9%E6%80%A7%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%AF%B9%E6%AF%94"><span class="nav-number">10.</span> <span class="nav-text">å¸¸ç”¨æ¨¡æ¿ç±»ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯å¯¹æ¯”</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jean Lv"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Jean Lv</p>
  <div class="site-description" itemprop="description">æ¶‰çŒçš„ä¸»è¦ç¼–ç¨‹è¯­è¨€Javaã€Python, é¢†åŸŸè½¯ä»¶æµ‹è¯•ã€AIæµ‹è¯•å¼€å‘ç›¸å…³</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">165</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jean Lv</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>











<script data-pjax>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'neutral',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


    <div id="pjax">
  

  

  

    </div>
</body>
</html>
