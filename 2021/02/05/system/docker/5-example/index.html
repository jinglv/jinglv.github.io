<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jinglv.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":5,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="学习Docker容器化技术第五讲">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker常用服务安装">
<meta property="og:url" content="https://jinglv.github.io/2021/02/05/system/docker/5-example/index.html">
<meta property="og:site_name" content="Jean&#39;s Blog">
<meta property="og:description" content="学习Docker容器化技术第五讲">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131600651.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jinglv/oss/images/202204271516392.png">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131601661.png">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131601716.png">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131602424.png">
<meta property="og:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131602487.png">
<meta property="article:published_time" content="2021-02-04T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-19T06:16:38.000Z">
<meta property="article:author" content="Jean Lv">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131600651.png">

<link rel="canonical" href="https://jinglv.github.io/2021/02/05/system/docker/5-example/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Docker常用服务安装 | Jean's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Jean's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jean's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">一个专注软件测试开发技术的个人博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jinglv.github.io/2021/02/05/system/docker/5-example/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Jean Lv">
      <meta itemprop="description" content="涉猎的主要编程语言Java、Python, 领域软件测试、AI测试开发相关">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jean's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Docker常用服务安装
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-05 00:00:00" itemprop="dateCreated datePublished" datetime="2021-02-05T00:00:00+08:00">2021-02-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-19 14:16:38" itemprop="dateModified" datetime="2021-05-19T14:16:38+08:00">2021-05-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          
            <div class="post-description">学习Docker容器化技术第五讲</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-安装mysql"><a href="#1-安装mysql" class="headerlink" title="1. 安装mysql"></a>1. 安装mysql</h1><ol>
<li><p>到docker hub上搜索mysql镜像，查看镜像的信息</p>
</li>
<li><p>拉取mysql镜像到本地</p>
<ul>
<li><code>docker pull mysql:tag (tag不加默认最新版本)</code></li>
</ul>
</li>
<li><p>运行mysql服务</p>
<ul>
<li><p>在启动mysql的时候，不能直接使用run直接启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -d --name mysql -p 3307:3306 mysql:5.7.33</span><br><span class="line">78edf58974fa8ff51d495e47a2b4fe74c06927d99a6df3d191a9d6491529561a</span><br><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES</span><br><span class="line">78edf58974fa   mysql:5.7.33   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   30 seconds ago   Exited (1) 29 seconds ago             mysql</span><br><span class="line">[root@localhost ~]# docker logs -f 78edf58974fa</span><br><span class="line">2021-02-10 15:50:55+00:00 [Note] [Entrypoint]: Entrypoint script <span class="keyword">for</span> MySQL Server 5.7.33-1debian10 started.</span><br><span class="line">2021-02-10 15:50:55+00:00 [Note] [Entrypoint]: Switching to dedicated user <span class="string">&#x27;mysql&#x27;</span></span><br><span class="line">2021-02-10 15:50:55+00:00 [Note] [Entrypoint]: Entrypoint script <span class="keyword">for</span> MySQL Server 5.7.33-1debian10 started.</span><br><span class="line">2021-02-10 15:50:55+00:00 [ERROR] [Entrypoint]: Database is uninitialized and password option is not specified</span><br><span class="line">	You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and MYSQL_RANDOM_ROOT_PASSWORD</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>没有暴露外部端口外部不能连接：<code>docker run --name mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:tag</code>    </p>
<ul>
<li>-e MYSQL_ROOT_PASSWORD=root 代表给root用户指定密码</li>
</ul>
</li>
<li><p>没有暴露外部端口：<code>docker run -d --name mysql -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 mysql:tag</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -d --name mysql -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 mysql:5.7.33</span><br><span class="line">969cafcd737bdafd3d59d9a55db71757d4a1dec32915aac7c1d2f756585c3bb0</span><br><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                               NAMES</span><br><span class="line">969cafcd737b   mysql:5.7.33   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   3 seconds ago   Up 3 seconds   0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>这时我们看到，mysql服务已经成功启动了，这时我们使用mysql连接工具连接便可以使用mysql了</p>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131600651.png" alt="image-20220713160045574"></p>
</li>
</ul>
<ol>
<li><p>进入mysql容器</p>
<ul>
<li><code>docker exec -it 容器名称|容器id bash</code></li>
</ul>
</li>
<li><p>外部查看mysql日志</p>
<ul>
<li><code>docker logs 容器名称|容器id</code></li>
</ul>
</li>
<li><p>使用自定义配置参数</p>
<ul>
<li><p><code>docker run -d --name mysql -v /root/mysql/conf.d:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=root mysql:tag</code></p>
<ul>
<li><code>/etc/mysql/conf.d</code> or <code>/etc/mysql/mysql.conf.d</code>容器中mysql自定义配置文件存放，需要进入容器确认是具体哪个文件</li>
<li><code>-v</code> 定义数据卷配置与容器中配置文件映射</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                               NAMES</span><br><span class="line">2d27fbf87ce4   mysql:5.7.33   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   2 minutes ago   Up 2 minutes   0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   mysql</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> -it 2d27fbf87ce4 bash</span><br><span class="line">root@2d27fbf87ce4:/# <span class="built_in">ls</span></span><br><span class="line">bin   dev			  entrypoint.sh  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">boot  docker-entrypoint-initdb.d  etc		 lib   media  opt  root  sbin  sys  usr</span><br><span class="line">root@2d27fbf87ce4:/# <span class="built_in">cd</span> /etc/mysql/</span><br><span class="line">root@2d27fbf87ce4:/etc/mysql# <span class="built_in">ls</span></span><br><span class="line">conf.d	my.cnf	my.cnf.fallback  mysql.cnf  mysql.conf.d</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>将容器数据位置与宿主机位置挂载保证数据安全</p>
<ul>
<li><code>docker run -d --name mysql -v /root/mysql/data:/var/lib/mysql -v /root/mysql/conf.d:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 mysql:tag</code><ul>
<li><code>-v /root/mysql/data</code> 将宿主机的绝对路径挂载到容器内存放数据目录/var/lib/mysql</li>
</ul>
</li>
<li><code>docker run -d --name mysql -v mysqldata:/var/lib/mysql -v mysqlconfig:/etc/mysql -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 mysql:tag</code><ul>
<li><code>-v mysqldata</code>自动创建名为mysqldata数据卷并挂载容器内存放数据目录/var/lib/mysql</li>
<li><code>-v mysqlconfig</code>自动创建名为mysqlconfig数据卷并挂载容器内配置文件目录/etc/mysql（该目录下全部内容）</li>
</ul>
</li>
<li>注意：在docker hub查看mysql描述信息得知mysql存储数据文件目录放置在容器这个目录/var/lib/mysql</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -d --name mysql -v mysqldata:/var/lib/mysql -v mysqlconfig:/etc/mysql -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 mysql:5.7.33</span><br><span class="line">91bc99c6586a4bbf393780d74f50ef2efdca56cbf471053bab6347b91b7d2386</span><br><span class="line">[root@localhost ~]# docker volume <span class="built_in">ls</span></span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line"><span class="built_in">local</span>     info</span><br><span class="line"><span class="built_in">local</span>     mysqlconfig</span><br><span class="line"><span class="built_in">local</span>     mysqldata</span><br><span class="line"><span class="comment"># 查看数据卷详情，查看挂载宿主机的配置目录地址</span></span><br><span class="line">[root@localhost ~]# docker volume inspect mysqlconfig</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;CreatedAt&quot;</span>: <span class="string">&quot;2021-02-11T00:52:09+08:00&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Labels&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;Mountpoint&quot;</span>: <span class="string">&quot;/var/lib/docker/volumes/mysqlconfig/_data&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;mysqlconfig&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Options&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 进入目录查看配置文件，我们修改该目录的配置文件即可</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cd</span> /var/lib/docker/volumes/mysqlconfig/_data</span><br><span class="line">[root@localhost _data]# <span class="built_in">ls</span></span><br><span class="line">conf.d  my.cnf  my.cnf.fallback  mysql.cnf  mysql.conf.d</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>将mysql数据库备份为sql文件</p>
<ul>
<li>导出全部数据：<code>docker exec mysql|容器id sh -c &#39;exec mysqldump --all-databases -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /root/all-databases.sql</code></li>
<li>导出指定库数据：<code>docker exec mysql sh -c &#39;exec mysqldump --databases 库表 -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /root/all-databases.sql</code></li>
<li>导出指定库数据不要数据：<code>docker exec mysql sh -c &#39;exec mysqldump --no-data --databases 库表 -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /root/all-databases.sql</code></li>
</ul>
</li>
<li><p>执行sql文件到mysql中</p>
<ul>
<li><code>docker exec -i mysql sh -c &#39;exec mysql -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &lt; /root/xxx.sql</code></li>
</ul>
</li>
</ol>
<h1 id="2-安装Redis服务"><a href="#2-安装Redis服务" class="headerlink" title="2. 安装Redis服务"></a>2. 安装Redis服务</h1><ol>
<li><p>在docker search搜索redis镜像</p>
<ul>
<li><code>docker search redis</code></li>
</ul>
</li>
<li><p>拉取redis镜像到本地</p>
<ul>
<li><code>docker pull redis</code></li>
</ul>
</li>
<li><p>启动redis服务运行容器</p>
<ul>
<li>没有暴露外部端口：<code>docker run --name redis -d redis:tag</code></li>
<li>暴露外部宿主机端口为6379进行连接：<code>docker run --name redis -p 6379:6379 -d redis:tag</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run --name redis -p 6379:6379 -d redis:latest</span><br><span class="line">89cd4e83cdcea1a09d1787b69c45ddd5b77416c0bba0290bb92095c9b1e49465</span><br><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                               NAMES</span><br><span class="line">89cd4e83cdce   redis:latest   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   8 minutes ago   Up 8 minutes   0.0.0.0:6379-&gt;6379/tcp              redis</span><br><span class="line">12674e8ddf28   tomcat         <span class="string">&quot;catalina.sh run&quot;</span>        2 hours ago     Up 2 hours     0.0.0.0:8080-&gt;8080/tcp              tomcat</span><br><span class="line">91bc99c6586a   mysql:5.7.33   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   2 hours ago     Up 2 hours     0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   mysql</span><br></pre></td></tr></table></figure>
<p>我们已经看到redis已经启动成功了，我们这是可以用工具连接一下：</p>
</li>
<li><p>查看启动日志</p>
<ul>
<li><code>docker logs -t -f 容器id|容器名称</code></li>
</ul>
</li>
<li><p>进入容器内部查看</p>
<ul>
<li><code>docker exec -it 容器id|容器名称 bash</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS              PORTS                               NAMES</span><br><span class="line">89cd4e83cdce   redis:latest   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   21 minutes ago       Up 21 minutes       0.0.0.0:6379-&gt;6379/tcp              redis</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> -it 89cd4e83cdce bash</span><br><span class="line">root@89cd4e83cdce:/data# <span class="built_in">ls</span></span><br><span class="line">root@89cd4e83cdce:/data#</span><br></pre></td></tr></table></figure>
<p>进入容器后，只有一个空的data目录</p>
</li>
</ol>
<ol>
<li><p>开启redis持久化</p>
<ul>
<li><code>docker run --name redis -d -p 6379:6379 -v redisdata:/data redis:latest redis-server --appendonly yes</code></li>
<li>注意：一旦开启持久化之后，持久化生成aof文件会被放入容器中/data目录中</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run --name redis -d -p 6379:6379 -v redisdata:/data redis:latest redis-server --appendonly <span class="built_in">yes</span></span><br><span class="line">8a90b7c4bab8ebce8ec39f8f70a23d288f7f4991f661ef9e1fa47b084afae8e6</span><br><span class="line">[root@localhost ~]# docker volume inspect redisdata</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;CreatedAt&quot;</span>: <span class="string">&quot;2021-02-11T03:07:35+08:00&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Labels&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;Mountpoint&quot;</span>: <span class="string">&quot;/var/lib/docker/volumes/redisdata/_data&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;redisdata&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Options&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">[root@localhost ~]# <span class="built_in">cd</span> /var/lib/docker/volumes/redisdata/_data</span><br><span class="line">[root@localhost _data]# <span class="built_in">ls</span></span><br><span class="line">appendonly.aof</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>加载外部自定义配置启动redis容器</p>
<ul>
<li>默认情况下redis官方镜像中没有redis.conf配置文件 需要去官网下载指定版本的配置文件<a target="_blank" rel="noopener" href="https://redis.io">Redis官网</a><ol>
<li>wget <a target="_blank" rel="noopener" href="https://download.redis.io/releases/redis-6.0.10.tar.gz">https://download.redis.io/releases/redis-6.0.10.tar.gz</a> 下载官方安装包</li>
<li>将官方安装包中配置文件进行复制到宿主机指定目录中如 /root/redis/redis.conf文件</li>
<li>修改需要自定义的配置<ul>
<li>bind 0.0.0.0 开启远程权限 — 搜索/bind</li>
<li>appenonly yes 开启aof持久化</li>
</ul>
</li>
<li>加载配置启动<ul>
<li><code>docker run --name redis -v /root/redis:/usr/local/etc/redis -p 6379:6379 -d redis:latest redis-server /usr/local/etc/redis/redis.conf</code></li>
<li>注意：当前/root/redis目录中存在redis.conf文件的</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>将数据目录挂在到本地保证数据安全</p>
<ul>
<li><code>docker run --name redis -v /root/redis/data:/data -v /root/redis/redis.conf:/usr/local/etc/redis/redis.conf -p 6379:6379 -d redis redis-server /usr/local/etc/redis/redis.conf</code></li>
</ul>
</li>
</ol>
<h1 id="3-安装Nginx"><a href="#3-安装Nginx" class="headerlink" title="3. 安装Nginx"></a>3. 安装Nginx</h1><ol>
<li><p>在docker search搜索nginx</p>
<ul>
<li><code>docker search nginx</code></li>
</ul>
</li>
<li><p>拉取nginx镜像到本地</p>
<ul>
<li><code>docker pull nginx</code></li>
</ul>
</li>
<li><p>启动nginx容器</p>
<ul>
<li><code>docker -d run -p 80:80 --name nginx nginx</code></li>
</ul>
</li>
<li><p>进入nginx容器</p>
<ul>
<li><code>docker exec -it nginx /bin/bash</code><ul>
<li>查找目录:  whereis nginx</li>
<li>配置文件:  /etc/nginx/nginx.conf</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -d --name nginx -p 80:80 nginx</span><br><span class="line">7d39100c58ac38e7509c7dfe855ae0d1b10d4a469d4e2eaa83222b8f79fb9603</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> -it nginx bash</span><br><span class="line">root@7d39100c58ac:/# whereis nginx</span><br><span class="line">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</span><br><span class="line">root@7d39100c58ac:/# <span class="built_in">cd</span> /etc/nginx</span><br><span class="line">root@7d39100c58ac:/etc/nginx# <span class="built_in">ls</span></span><br><span class="line">conf.d	fastcgi_params	koi-utf  koi-win  mime.types  modules  nginx.conf  scgi_params	uwsgi_params  win-utf</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>复制配置文件到宿主机</p>
<ul>
<li><code>docker cp nginx(容器id|容器名称):/etc/nginx/nginx.conf 宿主机目录</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker <span class="built_in">cp</span> nginx:/etc/nginx/nginx.conf /root/nginx/</span><br><span class="line">[root@localhost ~]# <span class="built_in">cd</span> nginx/</span><br><span class="line">[root@localhost nginx]# <span class="built_in">pwd</span></span><br><span class="line">/root/nginx</span><br><span class="line">[root@localhost nginx]# <span class="built_in">ls</span></span><br><span class="line">nginx.conf</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>挂在nginx配置以及html到宿主机外部</p>
<ul>
<li><code>docker run -d --name nginx -v /root/nginx/nginx.conf:/etc/nginx/nginx.conf -v /root/nginx/html:/usr/share/nginx/html -p 80:80 nginx</code></li>
</ul>
</li>
</ol>
<h1 id="4-安装Tomcat"><a href="#4-安装Tomcat" class="headerlink" title="4. 安装Tomcat"></a>4. 安装Tomcat</h1><ol>
<li>在docker search搜索tomcat<ul>
<li><code>docker search tomcat</code></li>
</ul>
</li>
<li>下载tomcat镜像<ul>
<li><code>docker pull tomcat:tag (tag不加默认最新版本)</code></li>
</ul>
</li>
<li>运行tomcat镜像<ul>
<li><code>docker run -d -p 8080:8080 --name tomcat tomcat</code></li>
</ul>
</li>
<li>进入tomcat容器<ul>
<li><code>docker exec -it tomcat /bin/bash</code></li>
</ul>
</li>
<li>将webapps目录挂载在宿主机<ul>
<li><code>docker run -d -p 8080:8080 -v webapps:/usr/local/tomcat/webapps --name tomcat tomcat</code><ul>
<li><code>-v webapps</code>将部署应用目录通过数据卷挂载宿主机系统</li>
<li>注意：部署web应用在容器中目录为/usr/local/tomcat/webapps，配置文件/usr/local/tomcat/conf</li>
</ul>
</li>
</ul>
</li>
<li>修改配置文件，并将应用目录通过数据卷挂载到宿主机<ul>
<li><code>docker run -d -p 8080:8080 --name tomcat -v webapps:/usr/local/tomcat/webapps -v confs:/usr/local/tomcat/conf  tomcat</code></li>
</ul>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker search tomcat</span><br><span class="line">NAME                          DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">tomcat                        Apache Tomcat is an open <span class="built_in">source</span> implementati…   2938      [OK]</span><br><span class="line">tomee                         Apache TomEE is an all-Apache Java EE certif…   86        [OK]</span><br><span class="line">dordoka/tomcat                Ubuntu 14.04, Oracle JDK 8 and Tomcat 8 base…   55                   [OK]</span><br><span class="line">bitnami/tomcat                Bitnami Tomcat Docker Image                     37                   [OK]</span><br><span class="line">kubeguide/tomcat-app          Tomcat image <span class="keyword">for</span> Chapter 1                      29</span><br><span class="line">consol/tomcat-7.0             Tomcat 7.0.57, 8080, <span class="string">&quot;admin/admin&quot;</span>              18                   [OK]</span><br><span class="line">cloudesire/tomcat             Tomcat server, 6/7/8                            15                   [OK]</span><br><span class="line">aallam/tomcat-mysql           Debian, Oracle JDK, Tomcat &amp; MySQL              13                   [OK]</span><br><span class="line">arm32v7/tomcat                Apache Tomcat is an open <span class="built_in">source</span> implementati…   10</span><br><span class="line">maluuba/tomcat7-java8         Tomcat7 with java8.                             6</span><br><span class="line">rightctrl/tomcat              CentOS , Oracle Java, tomcat application ssl…   6                    [OK]</span><br><span class="line">unidata/tomcat-docker         Security-hardened Tomcat Docker container.      5                    [OK]</span><br><span class="line">arm64v8/tomcat                Apache Tomcat is an open <span class="built_in">source</span> implementati…   3</span><br><span class="line">amd64/tomcat                  Apache Tomcat is an open <span class="built_in">source</span> implementati…   2</span><br><span class="line">jelastic/tomcat               An image of the Tomcat Java application serv…   2</span><br><span class="line">cfje/tomcat-resource          Tomcat Concourse Resource                       2</span><br><span class="line">ppc64le/tomcat                Apache Tomcat is an open <span class="built_in">source</span> implementati…   1</span><br><span class="line">camptocamp/tomcat-logback     Docker image <span class="keyword">for</span> tomcat with logback integra…   1                    [OK]</span><br><span class="line">picoded/tomcat7               tomcat7 with jre8 and MANAGER_USER / MANAGER…   1                    [OK]</span><br><span class="line">chenyufeng/tomcat-centos      tomcat基于centos6的镜像                              1                    [OK]</span><br><span class="line">oobsri/tomcat8                Testing CI Jobs with different names.           1</span><br><span class="line">99taxis/tomcat7               Tomcat7                                         1                    [OK]</span><br><span class="line">secoresearch/tomcat-varnish   Tomcat and Varnish 5.0                          0                    [OK]</span><br><span class="line">softwareplant/tomcat          Tomcat images <span class="keyword">for</span> jira-cloud testing            0                    [OK]</span><br><span class="line">s390x/tomcat                  Apache Tomcat is an open <span class="built_in">source</span> implementati…   0</span><br><span class="line">[root@localhost ~]# docker pull tomcat</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/tomcat</span><br><span class="line">b9a857cbf04d: Pull complete</span><br><span class="line">d557ee20540b: Pull complete</span><br><span class="line">3b9ca4f00c2e: Pull complete</span><br><span class="line">667fd949ed93: Pull complete</span><br><span class="line">661d3b55f657: Pull complete</span><br><span class="line">511ef4338a0b: Pull complete</span><br><span class="line">a56db448fefe: Pull complete</span><br><span class="line">00612a99c7dc: Pull complete</span><br><span class="line">326f9601c512: Pull complete</span><br><span class="line">c547db74f1e1: Pull complete</span><br><span class="line">Digest: sha256:94cc18203335e400dbafcd0633f33c53663b1c1012a13bcad58cced9cd9d1305</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> tomcat:latest</span><br><span class="line">docker.io/library/tomcat:latest</span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">mysql        5.7.33    a70d36bc331a   3 weeks ago   449MB</span><br><span class="line">tomcat       latest    040bdb29ab37   4 weeks ago   649MB</span><br><span class="line">[root@localhost ~]# docker run -d -p 8080:8080 --name tomcat -v webapps:/usr/local/tomcat/webapps -v confs:/usr/local/tomcat/conf tomcat</span><br><span class="line">12674e8ddf28fd09966093bef62dfd0308d1f876fd234d16b520c6aefc11eeea</span><br><span class="line">[root@localhost ~]# docker volume <span class="built_in">ls</span></span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line"><span class="built_in">local</span>     confs</span><br><span class="line"><span class="built_in">local</span>     info</span><br><span class="line"><span class="built_in">local</span>     mysqlconfig</span><br><span class="line"><span class="built_in">local</span>     mysqldata</span><br><span class="line"><span class="built_in">local</span>     webapps</span><br></pre></td></tr></table></figure>
<h1 id="5-安装MongoDB数据库"><a href="#5-安装MongoDB数据库" class="headerlink" title="5. 安装MongoDB数据库"></a>5. 安装MongoDB数据库</h1><ol>
<li><p>docker search mongo搜索mongo镜像</p>
</li>
<li><p>下载并运行mongo</p>
<ul>
<li>无需权限：<code>docker run -d -p 27017:27017 --name mongo mongo</code></li>
<li>常见具有的权限：<code>docker run -d -p 27017:27017 --name mongo mongo --auth</code></li>
</ul>
</li>
<li><p>进入容器配置用户名密码</p>
<ul>
<li><code>docker exec -it mongo /bin/bash</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> -it mongo bash</span><br><span class="line">root@2134279b5c49:/# mongo</span><br><span class="line">MongoDB shell version v4.4.3</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb</span><br><span class="line">Implicit session: session &#123; <span class="string">&quot;id&quot;</span> : UUID(<span class="string">&quot;8878de79-9548-42f6-8fd8-2dec9608fdd9&quot;</span>) &#125;</span><br><span class="line">MongoDB server version: 4.4.3</span><br><span class="line">Welcome to the MongoDB shell.</span><br><span class="line">For interactive <span class="built_in">help</span>, <span class="built_in">type</span> <span class="string">&quot;help&quot;</span>.</span><br><span class="line">For more comprehensive documentation, see</span><br><span class="line">	https://docs.mongodb.com/</span><br><span class="line">Questions? Try the MongoDB Developer Community Forums</span><br><span class="line">	https://community.mongodb.com</span><br><span class="line">---</span><br><span class="line">The server generated these startup warnings when booting:</span><br><span class="line">        2021-02-10T22:31:51.760+00:00: Access control is not enabled <span class="keyword">for</span> the database. Read and write access to data and configuration is unrestricted</span><br><span class="line">        2021-02-10T22:31:51.760+00:00: /sys/kernel/mm/transparent_hugepage/enabled is <span class="string">&#x27;always&#x27;</span>. We suggest setting it to <span class="string">&#x27;never&#x27;</span></span><br><span class="line">        2021-02-10T22:31:51.760+00:00: /sys/kernel/mm/transparent_hugepage/defrag is <span class="string">&#x27;always&#x27;</span>. We suggest setting it to <span class="string">&#x27;never&#x27;</span></span><br><span class="line">---</span><br><span class="line">---</span><br><span class="line">        Enable MongoDB<span class="string">&#x27;s free cloud-based monitoring service, which will then receive and display</span></span><br><span class="line"><span class="string">        metrics about your deployment (disk utilization, CPU, operation statistics, etc).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The monitoring data will be available on a MongoDB website with a unique URL accessible to you</span></span><br><span class="line"><span class="string">        and anyone you share the URL with. MongoDB may use this information to make product</span></span><br><span class="line"><span class="string">        improvements and to suggest MongoDB products and deployment options to you.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        To enable free monitoring, run the following command: db.enableFreeMonitoring()</span></span><br><span class="line"><span class="string">        To permanently disable this reminder, run the following command: db.disableFreeMonitoring()</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">&gt; use admin</span></span><br><span class="line"><span class="string">switched to db admin</span></span><br><span class="line"><span class="string">&gt; db.createUser(&#123;user:&quot;root&quot;,pwd:&quot;root&quot;,roles:[&#123;role:&#x27;</span>root<span class="string">&#x27;,db:&#x27;</span>admin<span class="string">&#x27;&#125;]&#125;)</span></span><br><span class="line"><span class="string">Successfully added user: &#123;</span></span><br><span class="line"><span class="string">	&quot;user&quot; : &quot;root&quot;,</span></span><br><span class="line"><span class="string">	&quot;roles&quot; : [</span></span><br><span class="line"><span class="string">		&#123;</span></span><br><span class="line"><span class="string">			&quot;role&quot; : &quot;root&quot;,</span></span><br><span class="line"><span class="string">			&quot;db&quot; : &quot;admin&quot;</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">	]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&gt; exit</span></span><br><span class="line"><span class="string">bye</span></span><br><span class="line"><span class="string">root@2134279b5c49:/#</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>use admin</code>选择admin库</li>
<li><code>db.createUser(&#123;user:&quot;root&quot;,pwd:&quot;root&quot;,roles:[&#123;role:&#39;root&#39;,db:&#39;admin&#39;&#125;]&#125;)</code>创建用户,此用户创建成功,则后续操作都需要用户认证</li>
</ul>
</li>
<li><p>将mongoDB中数据目录映射到宿主机中</p>
<ul>
<li><code>docker run -d -p 27017:27017 -v mongodata:/data/db --name mongo mongo</code></li>
</ul>
</li>
</ol>
<h1 id="6-安装ElasticSearch"><a href="#6-安装ElasticSearch" class="headerlink" title="6. 安装ElasticSearch"></a>6. 安装ElasticSearch</h1><h2 id="elasticsearch"><a href="#elasticsearch" class="headerlink" title="elasticsearch"></a>elasticsearch</h2><ol>
<li>docker hub搜索镜像，选择6.8.13的版本安装</li>
<li>下载elasticsearch 6.8.13的镜像<ul>
<li><code>docker pull elasticsearch:tag</code></li>
</ul>
</li>
<li>运行elasticsearch的镜像<ul>
<li><code>docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:tag</code></li>
</ul>
</li>
</ol>
<p>注意：elasticsearch在启动后，查看日志，会看到如下的警告</p>
<p><img src="https://cdn.jsdelivr.net/gh/jinglv/oss/images/202204271516392.png" alt="image-20220427151609235"></p>
<p>解决方案：</p>
<ol>
<li><p>在centos虚拟机中，修改配置sysctl.conf</p>
<ul>
<li><code>vim /etc/sysctl.conf</code></li>
</ul>
</li>
<li><p>加入如下配置</p>
<ul>
<li><code>vm.max_map_count=262144</code></li>
</ul>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131601661.png" alt="image-20220713160117627"></p>
</li>
<li><p>启用配置</p>
<ul>
<li><code>sysctl -p</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# sysctl -p</span><br><span class="line">vm.max_map_count = 262144</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>之后重新启动es容器，再次查看日志就不会报错了，这是我们可以访问一下<a target="_blank" rel="noopener" href="http://ip:9200">http://ip:9200</a> elasticsearch web页面</p>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131601716.png" alt="image-20220713160140681"></p>
<p>注意：这一步是为了防止启动容器时，报出如下错误：<br>    <code>bootstrap checks failed max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]</code></p>
<h3 id="es中持久化方案"><a href="#es中持久化方案" class="headerlink" title="es中持久化方案"></a>es中持久化方案</h3><p>注意：es所有数据都在容器中的目录/usr/share/elasticsearch/data，配置信息都在容器中的目录/usr/share/elasticsearch/config</p>
<p>启动es，将数据信息和配置信息都挂载到宿主机中</p>
<p><code>docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -v esdata:/usr/share/elasticsearch/data -v esconfig:/usr/share/elasticsearch/config elasticsearch:tag</code></p>
<h3 id="安装IK分词器"><a href="#安装IK分词器" class="headerlink" title="安装IK分词器"></a>安装IK分词器</h3><ol>
<li><p>现在对应版本的ik分词器</p>
<ul>
<li><code>wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.8.13/elasticsearch-analysis-ik-6.8.13.zip</code></li>
</ul>
</li>
<li><p>es容器中插件目录/usr/share/elasticsearch/plugins，启动容器是挂载处理，并在挂载目录plugins中，解压elasticsearch-analysis-ik-6.8.13.zip</p>
<ul>
<li><p>挂载plugins启动es：<code>docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -v esdata:/usr/share/elasticsearch/data -v esconfig:/usr/share/elasticsearch/config -v esplugins:/usr/share/elasticsearch/plugins elasticsearch:tag</code></p>
</li>
<li><p>查看数据卷详细信息，找到挂载宿主机的目录：<code>docker volume inspectesplugins</code></p>
</li>
<li><p>将ik分词器，移动到挂载宿主机目录中，并解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker volume inspect esplugins</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;CreatedAt&quot;</span>: <span class="string">&quot;2021-02-11T05:43:43+08:00&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Labels&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;Mountpoint&quot;</span>: <span class="string">&quot;/var/lib/docker/volumes/esplugins/_data&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;esplugins&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Options&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">[root@localhost ~]# <span class="built_in">cd</span> /var/lib/docker/volumes/esplugins/_data</span><br><span class="line">[root@localhost _data]# <span class="built_in">mv</span> /root/elasticsearch-analysis-ik-6.8.13.zip .</span><br><span class="line">[root@localhost _data]# <span class="built_in">ls</span></span><br><span class="line">elasticsearch-analysis-ik-6.8.13.zip</span><br><span class="line">[root@localhost _data]# yum install unzip</span><br><span class="line">[root@localhost _data]# <span class="built_in">mkdir</span> ik</span><br><span class="line">[root@localhost _data]# <span class="built_in">mv</span> elasticsearch-analysis-ik-6.8.13.zip ik/</span><br><span class="line">[root@localhost ik]# unzip elasticsearch-analysis-ik-6.8.13.zip</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>解压完成后，再次重启elasticsearch，查看日志</p>
<ul>
<li><p><code>docker restart 容器id|容器名</code></p>
</li>
<li><p><code>docker logs -f 容器id|容器名</code></p>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131602424.png" alt="image-20220713160218385"></p>
<p>已经加载了插件ik分词器</p>
</li>
</ul>
</li>
<li><p>自定义扩展词和停用词</p>
<ol>
<li><p>修改ik配置文件，添加自定义扩展词和停用词</p>
<ul>
<li><p>进入的配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/lib/docker/volumes/esplugins/_data/ik/config</span><br><span class="line">vim IKAnalyzer.cfg.xml</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</li>
</ol>
<pre><code>  - 修改内容如下：

    <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">     <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">comment</span>&gt;</span>IK Analyzer 扩展配置<span class="tag">&lt;/<span class="name">comment</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!--用户可以在这里配置自己的扩展字典 --&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;ext_dict&quot;</span>&gt;</span>ext_dict.dic<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      		<span class="comment">&lt;!--用户可以在这里配置自己的扩展停止词字典--&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;ext_stopwords&quot;</span>&gt;</span>ext_stopwords.dic<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​     </span><br><span class="line"></span><br><span class="line">2. 在ik分词器目录下config目录中创建ext_dict.dic文件   编码一定要为UTF-8才能生效</span><br><span class="line"></span><br><span class="line">   - ```bash</span><br><span class="line">    vim ext_dict.dic 加入扩展词即可</span><br></pre></td></tr></table></figure>
</code></pre><ol>
<li><p>在ik分词器目录下config目录中创建ext_stopword.dic文件 </p>
<ul>
<li>```bash<br>vim ext_stopwords.dic 加入停用词即可<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">        </span><br><span class="line">   </span><br><span class="line">   4. 重启容器生效</span><br><span class="line">   </span><br><span class="line">      - `docker restart 容器id`</span><br><span class="line">   </span><br><span class="line">   5. 将此容器提交成为一个新的镜像</span><br><span class="line">   </span><br><span class="line">      - `docker commit -a=&quot;lvjing&quot; -m=&quot;es with IKAnalyzer&quot; 容器id lvjing/elasticsearch:tag`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### es的启动</span><br><span class="line"></span><br><span class="line">注意：es是非常耗内存的，在启动es后，在Linux下输入命令反应就非常慢，则我们在启动es的时候，需要指定jvm内存大小启动</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">[root@localhost ~]# docker stats</span><br><span class="line">CONTAINER ID   NAME            CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O        PIDS</span><br><span class="line">a4e18036fa7a   elasticsearch   2.96%     416.2MiB / 991.2MiB   41.99%    656B / 0B   225MB / 1.33MB   48</span><br><span class="line">CONTAINER ID   NAME            CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O        PIDS</span><br><span class="line">a4e18036fa7a   elasticsearch   2.96%     416.2MiB / 991.2MiB   41.99%    656B / 0B   225MB / 1.33MB   48</span><br><span class="line">CONTAINER ID   NAME            CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O        PIDS</span><br><span class="line">a4e18036fa7a   elasticsearch   113.11%   417.1MiB / 991.2MiB   42.08%    656B / 0B   225MB / 1.66MB   48</span><br><span class="line">...</span><br><span class="line">[root@localhost ~]# docker run -d --name es -p 9200:9200 -p 9300:9300 -e ES_JAVA_OPTS=&quot;-Xms128m -Xmx128m&quot; -v esconfig:/usr/share/elasticsearch/config -v esplugins:/usr/share/elasticsearch/plugins -v esdata:/usr/share/elasticsearch/data elasticsearch:tag</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="kibana"><a href="#kibana" class="headerlink" title="kibana"></a>kibana</h2><ol>
<li><p>docker hub搜索kibana镜像，要与elasticsearch版本一致</p>
</li>
<li><p>下载kibana镜像</p>
<ul>
<li><code>docker pull kibana:tag</code></li>
</ul>
</li>
<li><p>启动kibana，并连接es服务</p>
<ul>
<li><code>docker run -d --name kibana -e ELASTICSEARCH_URL=http://ip:9200 -p 5601:5601 kibana:tag</code></li>
</ul>
</li>
<li><p>启动kibana，加载配置文件</p>
<ul>
<li><code>docker run -d --name kibana -e ELASTICSEARCH_URL=http://ip:9200 -p 5601:5601 -v kibanaconfig:/usr/share/kibana/config kibana:tag</code></li>
<li>注意：可以在kibanaconf数据卷所在的宿主机目录中加入kibana文件修改配置文件信息，则就不需要在启动命令指定连接的es服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -d --name kibana -p 5601:5601 -v kibanaconfig:/usr/share/kibana/config kibana:6.8.13</span><br><span class="line">6af4b0da7090c347907240dbd124f69bdad6385e993bd67ef739d6a9ae1cb819</span><br><span class="line">[root@localhost ~]# docker volume inspect kibanaconfig</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;CreatedAt&quot;</span>: <span class="string">&quot;2021-02-11T06:22:43+08:00&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Labels&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;Mountpoint&quot;</span>: <span class="string">&quot;/var/lib/docker/volumes/kibanaconfig/_data&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;kibanaconfig&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Options&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">[root@localhost ~]# <span class="built_in">cd</span> /var/lib/docker/volumes/kibanaconfig/_data</span><br><span class="line">[root@localhost _data]# <span class="built_in">ls</span></span><br><span class="line">kibana.yml</span><br><span class="line">[root@localhost _data]# vim kibana.yml</span><br><span class="line">[root@localhost _data]# <span class="built_in">cat</span> kibana.yml</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ** THIS IS AN AUTO-GENERATED FILE **</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Default Kibana configuration for docker target</span></span><br><span class="line">server.name: kibana</span><br><span class="line"><span class="comment"># 0 表示所有服务都可连</span></span><br><span class="line">server.host: <span class="string">&quot;0&quot;</span></span><br><span class="line"><span class="comment"># 修改指定连接的es服务</span></span><br><span class="line">elasticsearch.hosts: [ <span class="string">&quot;http://192.168.1.115:9200&quot;</span> ]</span><br><span class="line">xpack.monitoring.ui.container.elasticsearch.enabled: <span class="literal">true</span></span><br><span class="line">[root@localhost ~]# docker restart 6af4b0da7090</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>启动成功后，浏览器访问<a href="http://ip:5601查看kibana页面">http://ip:5601查看kibana页面</a></p>
<p><img src="https://jing-images.oss-cn-beijing.aliyuncs.com/img/202207131602487.png" alt="image-20220713160258396"></p>
</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Docker/" rel="tag"># Docker</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/02/05/system/docker/4-network/" rel="prev" title="Docker中的网络配置">
      <i class="fa fa-chevron-left"></i> Docker中的网络配置
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/02/05/system/docker/3-operation/" rel="next" title="Docker相关操作">
      Docker相关操作 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85mysql"><span class="nav-number">1.</span> <span class="nav-text">1. 安装mysql</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E5%AE%89%E8%A3%85Redis%E6%9C%8D%E5%8A%A1"><span class="nav-number">2.</span> <span class="nav-text">2. 安装Redis服务</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E5%AE%89%E8%A3%85Nginx"><span class="nav-number">3.</span> <span class="nav-text">3. 安装Nginx</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E5%AE%89%E8%A3%85Tomcat"><span class="nav-number">4.</span> <span class="nav-text">4. 安装Tomcat</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E5%AE%89%E8%A3%85MongoDB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">5.</span> <span class="nav-text">5. 安装MongoDB数据库</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E5%AE%89%E8%A3%85ElasticSearch"><span class="nav-number">6.</span> <span class="nav-text">6. 安装ElasticSearch</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#elasticsearch"><span class="nav-number">6.1.</span> <span class="nav-text">elasticsearch</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#es%E4%B8%AD%E6%8C%81%E4%B9%85%E5%8C%96%E6%96%B9%E6%A1%88"><span class="nav-number">6.1.1.</span> <span class="nav-text">es中持久化方案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85IK%E5%88%86%E8%AF%8D%E5%99%A8"><span class="nav-number">6.1.2.</span> <span class="nav-text">安装IK分词器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#kibana"><span class="nav-number">6.2.</span> <span class="nav-text">kibana</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jean Lv"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Jean Lv</p>
  <div class="site-description" itemprop="description">涉猎的主要编程语言Java、Python, 领域软件测试、AI测试开发相关</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">153</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jean Lv</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  

  

    </div>
</body>
</html>
